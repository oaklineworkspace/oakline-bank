-- Future-proof accounts table
create table if not exists public.accounts (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users(id),
  account_number text unique,
  account_type text,
  balance numeric default 0,
  full_name text,
  phone text,
  address text,
  date_of_birth date,
  profile_picture_url text,
  created_at timestamptz default now()
);

-- Enable Row Level Security
alter table public.accounts enable row level security;

-- Policy: users can only access their own row
create policy "Allow individual access" on public.accounts
  for all
  using (auth.uid() = user_id);
