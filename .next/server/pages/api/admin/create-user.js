"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/create-user";
exports.ids = ["pages/api/admin/create-user"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcreate-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fcreate-user.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcreate-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fcreate-user.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_create_user_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/admin/create-user.js */ \"(api)/./pages/api/admin/create-user.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_create_user_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_create_user_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/create-user\",\n        pathname: \"/api/admin/create-user\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_admin_create_user_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGY3JlYXRlLXVzZXImcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmFkbWluJTJGY3JlYXRlLXVzZXIuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNkQ7QUFDN0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDREQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw0REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYWtsaW5lLWJhbmsvPzVmMWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9hZG1pbi9jcmVhdGUtdXNlci5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL2NyZWF0ZS11c2VyXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vY3JlYXRlLXVzZXJcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcreate-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fcreate-user.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabaseClient.js":
/*!*******************************!*\
  !*** ./lib/supabaseClient.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n// lib/supabaseClient.js\n\n// Supabase configuration - Use your environment variables\nconst supabaseUrl = \"https://nrjdmgltshosdqccaymr.supabase.co\" || 0 || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yamRtZ2x0c2hvc2RxY2NheW1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwMzYyMjAsImV4cCI6MjA3MTYxMjIyMH0.b9H553W2PCsSNvr8HyyINl4nTSrldHN_QMQ3TVwt6qk\" || 0 || 0;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_SERVICE_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yamRtZ2x0c2hvc2RxY2NheW1yIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjAzNjIyMCwiZXhwIjoyMDcxNjEyMjIwfQ.cXKwVlQNqtAE13jrgmr2RBuIwtEbxqGsVF9SiRwqV_E\";\n// Validate required environment variables\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing Supabase configuration\");\n}\n// Public client for front-end (browser)\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Server-side client with elevated privileges\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2VDbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLHdCQUF3QjtBQUM2QjtBQUVyRCwwREFBMEQ7QUFDMUQsTUFBTUMsY0FBY0MsMENBQW9DLElBQUlBLENBQXdCLElBQUk7QUFDeEYsTUFBTUksa0JBQWtCSixrTkFBeUMsSUFBSUEsQ0FBNkIsSUFBSTtBQUN0RyxNQUFNTyxxQkFBcUJQLFFBQVFDLEdBQUcsQ0FBQ08seUJBQXlCLElBQUlSLFFBQVFDLEdBQUcsQ0FBQ1Esb0JBQW9CLElBQUk7QUFFeEcsMENBQTBDO0FBQzFDLElBQUksQ0FBQ1YsZUFBZSxDQUFDSyxpQkFBaUI7SUFDcENNLFFBQVFDLEtBQUssQ0FBQztBQUNoQjtBQUVBLHdDQUF3QztBQUNqQyxNQUFNQyxXQUFXZCxtRUFBWUEsQ0FBQ0MsYUFBYUssaUJBQWlCO0FBRW5FLDhDQUE4QztBQUN2QyxNQUFNUyxnQkFBZ0JmLG1FQUFZQSxDQUFDQyxhQUFhUSxvQkFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYWtsaW5lLWJhbmsvLi9saWIvc3VwYWJhc2VDbGllbnQuanM/NWYwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIGxpYi9zdXBhYmFzZUNsaWVudC5qc1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuLy8gU3VwYWJhc2UgY29uZmlndXJhdGlvbiAtIFVzZSB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMIHx8ICdodHRwczovL25yamRtZ2x0c2hvc2RxY2NheW1yLnN1cGFiYXNlLmNvJztcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIHx8IHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZIHx8ICdleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKcGMzTWlPaUp6ZFhCaFltRnpaU0lzSW5KbFppSTZJbTV5YW1SdFoyeDBjMmh2YzJSeFkyTmhlVzF5SWl3aWNtOXNaU0k2SW1GdWIyNGlMQ0pwWVhRaU9qRTNOVFl3TXpZeU1qQXNJbVY0Y0NJNk1qQTNNVFl4TWpJeU1IMC5iOUg1NTNXMlBDc1NOdnI4SHl5SU5sNG5UU3JsZEhOX1FNUTNUVnd0NnFrJztcbmNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgfHwgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9LRVkgfHwgJ2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwYzNNaU9pSnpkWEJoWW1GelpTSXNJbkpsWmlJNkltNXlhbVJ0WjJ4MGMyaHZjMlJ4WTJOaGVXMXlJaXdpY205c1pTSTZJbk5sY25acFkyVmZjbTlzWlNJc0ltbGhkQ0k2TVRjMU5qQXpOakl5TUN3aVpYaHdJam95TURjeE5qRXlNakl3ZlEuY1hLd1ZsUU5xdEFFMTNqcmdtcjJSQnVJd3RFYnhxR3NWRjlTaVJ3cVZfRSc7XG5cbi8vIFZhbGlkYXRlIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlc1xuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgY29uZmlndXJhdGlvbicpO1xufVxuXG4vLyBQdWJsaWMgY2xpZW50IGZvciBmcm9udC1lbmQgKGJyb3dzZXIpXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7XG5cbi8vIFNlcnZlci1zaWRlIGNsaWVudCB3aXRoIGVsZXZhdGVkIHByaXZpbGVnZXNcbmV4cG9ydCBjb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXkpO1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiU1VQQUJBU0VfU0VSVklDRV9LRVkiLCJjb25zb2xlIiwiZXJyb3IiLCJzdXBhYmFzZSIsInN1cGFiYXNlQWRtaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/supabaseClient.js\n");

/***/ }),

/***/ "(api)/./pages/api/admin/create-user.js":
/*!****************************************!*\
  !*** ./pages/api/admin/create-user.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/supabaseClient */ \"(api)/./lib/supabaseClient.js\");\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    // Basic admin check - in production, you'd want proper admin authentication\n    const adminKey = req.headers[\"x-admin-key\"];\n    if (adminKey !== process.env.ADMIN_SECRET_KEY) {\n        return res.status(401).json({\n            error: \"Unauthorized - Invalid admin credentials\"\n        });\n    }\n    const { firstName, middleName, lastName, mothersMaidenName, email, phone, dateOfBirth, ssn, idNumber, country, address, city, state, zipCode, accountTypes, employmentStatus, annualIncome, password, sendEnrollmentEmail = true } = req.body;\n    // Map frontend field names to expected names\n    const dob = dateOfBirth;\n    const ssnOrId = country === \"US\" ? ssn : idNumber;\n    const selectedAccountTypes = accountTypes;\n    // Validation\n    if (!firstName || !lastName || !email || !dob || !address || !city || !state || !zipCode || !selectedAccountTypes || !annualIncome || !password) {\n        return res.status(400).json({\n            error: \"Missing required fields: firstName, lastName, email, dateOfBirth, address, city, state, zipCode, accountTypes, annualIncome, password\"\n        });\n    }\n    if (!ssnOrId) {\n        return res.status(400).json({\n            error: `Missing required field: ${country === \"US\" ? \"SSN\" : \"ID Number\"} is required`\n        });\n    }\n    try {\n        // 1. Check if user already exists\n        const { data: existingUser } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"applications\").select(\"email\").eq(\"email\", email).single();\n        if (existingUser) {\n            return res.status(409).json({\n                error: \"User with this email already exists\"\n            });\n        }\n        // 2. Create application record\n        const applicationData = {\n            first_name: firstName,\n            middle_name: middleName || null,\n            last_name: lastName,\n            mothers_maiden_name: mothersMaidenName || null,\n            email: email.toLowerCase(),\n            phone: phone || null,\n            date_of_birth: dateOfBirth,\n            ssn: country === \"US\" ? ssn : null,\n            id_number: country !== \"US\" ? idNumber : null,\n            country: country,\n            address: address,\n            city: city,\n            state: state,\n            zip_code: zipCode,\n            account_types: accountTypes,\n            employment_status: employmentStatus,\n            annual_income: parseFloat(annualIncome),\n            application_status: \"approved\",\n            created_by_admin: true,\n            submitted_at: new Date().toISOString(),\n            processed_at: new Date().toISOString()\n        };\n        const { data: application, error: applicationError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"applications\").insert([\n            applicationData\n        ]).select().single();\n        if (applicationError) {\n            console.error(\"Application creation error:\", applicationError);\n            return res.status(500).json({\n                error: \"Failed to create application record\"\n            });\n        }\n        // 3. Create accounts for each selected account type\n        const accountsData = accountTypes.map((accountType)=>{\n            const accountTypeConfig = {\n                \"checking\": {\n                    name: \"Checking Account\",\n                    initialBalance: 100.00\n                },\n                \"savings\": {\n                    name: \"Savings Account\",\n                    initialBalance: 0.00\n                },\n                \"business\": {\n                    name: \"Business Account\",\n                    initialBalance: 500.00\n                },\n                \"premium\": {\n                    name: \"Premium Account\",\n                    initialBalance: 1000.00\n                }\n            };\n            const config = accountTypeConfig[accountType] || {\n                name: \"Standard Account\",\n                initialBalance: 0.00\n            };\n            // Generate unique 10-digit account number\n            const accountNumber = Array.from({\n                length: 10\n            }, ()=>Math.floor(Math.random() * 10)).join(\"\");\n            return {\n                application_id: application.id,\n                account_number: accountNumber,\n                account_type: accountType,\n                account_name: config.name,\n                balance: config.initialBalance,\n                status: \"active\",\n                created_at: new Date().toISOString()\n            };\n        });\n        const { data: accounts, error: accountsError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"accounts\").insert(accountsData).select();\n        if (accountsError) {\n            console.error(\"Accounts creation error:\", accountsError);\n            return res.status(500).json({\n                error: \"Failed to create account records\"\n            });\n        }\n        // 4. Create Supabase Auth user\n        const { data: authUser, error: authError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.admin.createUser({\n            email: email.toLowerCase(),\n            password: password,\n            email_confirm: true,\n            user_metadata: {\n                first_name: firstName,\n                last_name: lastName,\n                middle_name: middleName,\n                application_id: application.id,\n                admin_created: true\n            }\n        });\n        if (authError) {\n            console.error(\"Auth user creation error:\", authError);\n            return res.status(500).json({\n                error: \"Failed to create authentication account\"\n            });\n        }\n        // 5. Create profile record\n        try {\n            const { error: profileError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"profiles\").insert({\n                id: authUser.user.id,\n                email: email.toLowerCase(),\n                first_name: firstName,\n                last_name: lastName,\n                middle_name: middleName,\n                phone: phone,\n                date_of_birth: dateOfBirth,\n                country: country,\n                address: address,\n                city: city,\n                state: state,\n                zip_code: zipCode,\n                application_id: application.id,\n                created_at: new Date().toISOString()\n            });\n            if (profileError) {\n                console.error(\"Profile creation error:\", profileError);\n            // Don't fail the whole process for profile creation\n            }\n        } catch (profileError) {\n            console.error(\"Profile creation failed:\", profileError);\n        }\n        // 6. Link accounts to auth user\n        const { error: linkError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"accounts\").update({\n            user_id: authUser.user.id\n        }).eq(\"application_id\", application.id);\n        if (linkError) {\n            console.error(\"Account linking error:\", linkError);\n        // Don't fail for this error\n        }\n        // 7. Send welcome email if requested\n        let emailSent = false;\n        if (sendEnrollmentEmail) {\n            try {\n                const emailResponse = await fetch(`${req.headers.origin}/api/send-welcome-email`, {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        application_id: application.id,\n                        send_enrollment: true\n                    })\n                });\n                if (emailResponse.ok) {\n                    emailSent = true;\n                }\n            } catch (emailError) {\n                console.error(\"Email sending error:\", emailError);\n            }\n        }\n        // 8. Success response\n        res.status(201).json({\n            message: \"User account created successfully\",\n            user: {\n                id: application.id,\n                auth_id: authUser.user.id,\n                email: email,\n                name: `${firstName} ${middleName ? middleName + \" \" : \"\"}${lastName}`,\n                application_status: \"approved\",\n                created_by_admin: true\n            },\n            accounts: accounts.map((acc)=>({\n                    account_number: acc.account_number,\n                    account_type: acc.account_type,\n                    account_name: acc.account_name,\n                    balance: acc.balance\n                })),\n            email_sent: emailSent\n        });\n    } catch (error) {\n        console.error(\"Admin user creation error:\", error);\n        res.status(500).json({\n            error: \"Internal server error during user creation\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTO1lBQ1RiLE1BQU07Z0JBQ0pqQixJQUFJbkIsWUFBWW1CLEVBQUU7Z0JBQ2xCK0IsU0FBU3ZCLFNBQVNTLElBQUksQ0FBQ2pCLEVBQUU7Z0JBQ3pCL0QsT0FBT0E7Z0JBQ1BvRCxNQUFNLENBQUMsRUFBRXhELFVBQVUsQ0FBQyxFQUFFQyxhQUFhQSxhQUFhLE1BQU0sR0FBRyxFQUFFQyxTQUFTLENBQUM7Z0JBQ3JFd0Msb0JBQW9CO2dCQUNwQkMsa0JBQWtCO1lBQ3BCO1lBQ0E4QixVQUFVQSxTQUFTcEIsR0FBRyxDQUFDOEMsQ0FBQUEsTUFBUTtvQkFDN0IvQixnQkFBZ0IrQixJQUFJL0IsY0FBYztvQkFDbENDLGNBQWM4QixJQUFJOUIsWUFBWTtvQkFDOUJDLGNBQWM2QixJQUFJN0IsWUFBWTtvQkFDOUJDLFNBQVM0QixJQUFJNUIsT0FBTztnQkFDdEI7WUFDQTZCLFlBQVlaO1FBQ2Q7SUFFRixFQUFFLE9BQU85RixPQUFPO1FBQ2R5RCxRQUFRekQsS0FBSyxDQUFDLDhCQUE4QkE7UUFDNUNKLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUE2QztJQUM3RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2FrbGluZS1iYW5rLy4vcGFnZXMvYXBpL2FkbWluL2NyZWF0ZS11c2VyLmpzP2M5Y2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJy4uLy4uLy4uL2xpYi9zdXBhYmFzZUNsaWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIC8vIEJhc2ljIGFkbWluIGNoZWNrIC0gaW4gcHJvZHVjdGlvbiwgeW91J2Qgd2FudCBwcm9wZXIgYWRtaW4gYXV0aGVudGljYXRpb25cbiAgY29uc3QgYWRtaW5LZXkgPSByZXEuaGVhZGVyc1sneC1hZG1pbi1rZXknXTtcbiAgaWYgKGFkbWluS2V5ICE9PSBwcm9jZXNzLmVudi5BRE1JTl9TRUNSRVRfS0VZKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQgLSBJbnZhbGlkIGFkbWluIGNyZWRlbnRpYWxzJyB9KTtcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICBmaXJzdE5hbWUsXG4gICAgbWlkZGxlTmFtZSxcbiAgICBsYXN0TmFtZSxcbiAgICBtb3RoZXJzTWFpZGVuTmFtZSxcbiAgICBlbWFpbCxcbiAgICBwaG9uZSxcbiAgICBkYXRlT2ZCaXJ0aCxcbiAgICBzc24sXG4gICAgaWROdW1iZXIsXG4gICAgY291bnRyeSxcbiAgICBhZGRyZXNzLFxuICAgIGNpdHksXG4gICAgc3RhdGUsXG4gICAgemlwQ29kZSxcbiAgICBhY2NvdW50VHlwZXMsXG4gICAgZW1wbG95bWVudFN0YXR1cyxcbiAgICBhbm51YWxJbmNvbWUsXG4gICAgcGFzc3dvcmQsXG4gICAgc2VuZEVucm9sbG1lbnRFbWFpbCA9IHRydWVcbiAgfSA9IHJlcS5ib2R5O1xuXG4gIC8vIE1hcCBmcm9udGVuZCBmaWVsZCBuYW1lcyB0byBleHBlY3RlZCBuYW1lc1xuICBjb25zdCBkb2IgPSBkYXRlT2ZCaXJ0aDtcbiAgY29uc3Qgc3NuT3JJZCA9IGNvdW50cnkgPT09ICdVUycgPyBzc24gOiBpZE51bWJlcjtcbiAgY29uc3Qgc2VsZWN0ZWRBY2NvdW50VHlwZXMgPSBhY2NvdW50VHlwZXM7XG5cbiAgLy8gVmFsaWRhdGlvblxuICBpZiAoIWZpcnN0TmFtZSB8fCAhbGFzdE5hbWUgfHwgIWVtYWlsIHx8ICFkb2IgfHwgIWFkZHJlc3MgfHwgIWNpdHkgfHwgIXN0YXRlIHx8ICF6aXBDb2RlIHx8ICFzZWxlY3RlZEFjY291bnRUeXBlcyB8fCAhYW5udWFsSW5jb21lIHx8ICFwYXNzd29yZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IGZpcnN0TmFtZSwgbGFzdE5hbWUsIGVtYWlsLCBkYXRlT2ZCaXJ0aCwgYWRkcmVzcywgY2l0eSwgc3RhdGUsIHppcENvZGUsIGFjY291bnRUeXBlcywgYW5udWFsSW5jb21lLCBwYXNzd29yZCcgfSk7XG4gIH1cblxuICBpZiAoIXNzbk9ySWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogYE1pc3NpbmcgcmVxdWlyZWQgZmllbGQ6ICR7Y291bnRyeSA9PT0gJ1VTJyA/ICdTU04nIDogJ0lEIE51bWJlcid9IGlzIHJlcXVpcmVkYCB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gMS4gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdVc2VyIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnYXBwbGljYXRpb25zJylcbiAgICAgIC5zZWxlY3QoJ2VtYWlsJylcbiAgICAgIC5lcSgnZW1haWwnLCBlbWFpbClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IGVycm9yOiAnVXNlciB3aXRoIHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdHMnIH0pO1xuICAgIH1cblxuICAgIC8vIDIuIENyZWF0ZSBhcHBsaWNhdGlvbiByZWNvcmRcbiAgICBjb25zdCBhcHBsaWNhdGlvbkRhdGEgPSB7XG4gICAgICBmaXJzdF9uYW1lOiBmaXJzdE5hbWUsXG4gICAgICBtaWRkbGVfbmFtZTogbWlkZGxlTmFtZSB8fCBudWxsLFxuICAgICAgbGFzdF9uYW1lOiBsYXN0TmFtZSxcbiAgICAgIG1vdGhlcnNfbWFpZGVuX25hbWU6IG1vdGhlcnNNYWlkZW5OYW1lIHx8IG51bGwsXG4gICAgICBlbWFpbDogZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgIHBob25lOiBwaG9uZSB8fCBudWxsLFxuICAgICAgZGF0ZV9vZl9iaXJ0aDogZGF0ZU9mQmlydGgsXG4gICAgICBzc246IGNvdW50cnkgPT09ICdVUycgPyBzc24gOiBudWxsLFxuICAgICAgaWRfbnVtYmVyOiBjb3VudHJ5ICE9PSAnVVMnID8gaWROdW1iZXIgOiBudWxsLFxuICAgICAgY291bnRyeTogY291bnRyeSxcbiAgICAgIGFkZHJlc3M6IGFkZHJlc3MsXG4gICAgICBjaXR5OiBjaXR5LFxuICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgemlwX2NvZGU6IHppcENvZGUsXG4gICAgICBhY2NvdW50X3R5cGVzOiBhY2NvdW50VHlwZXMsXG4gICAgICBlbXBsb3ltZW50X3N0YXR1czogZW1wbG95bWVudFN0YXR1cyxcbiAgICAgIGFubnVhbF9pbmNvbWU6IHBhcnNlRmxvYXQoYW5udWFsSW5jb21lKSxcbiAgICAgIGFwcGxpY2F0aW9uX3N0YXR1czogJ2FwcHJvdmVkJywgLy8gQWRtaW4gY3JlYXRlZCBhcHBsaWNhdGlvbnMgYXJlIHByZS1hcHByb3ZlZFxuICAgICAgY3JlYXRlZF9ieV9hZG1pbjogdHJ1ZSxcbiAgICAgIHN1Ym1pdHRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgcHJvY2Vzc2VkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgY29uc3QgeyBkYXRhOiBhcHBsaWNhdGlvbiwgZXJyb3I6IGFwcGxpY2F0aW9uRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbnMnKVxuICAgICAgLmluc2VydChbYXBwbGljYXRpb25EYXRhXSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGFwcGxpY2F0aW9uRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FwcGxpY2F0aW9uIGNyZWF0aW9uIGVycm9yOicsIGFwcGxpY2F0aW9uRXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGFwcGxpY2F0aW9uIHJlY29yZCcgfSk7XG4gICAgfVxuXG4gICAgLy8gMy4gQ3JlYXRlIGFjY291bnRzIGZvciBlYWNoIHNlbGVjdGVkIGFjY291bnQgdHlwZVxuICAgIGNvbnN0IGFjY291bnRzRGF0YSA9IGFjY291bnRUeXBlcy5tYXAoYWNjb3VudFR5cGUgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudFR5cGVDb25maWcgPSB7XG4gICAgICAgICdjaGVja2luZyc6IHsgbmFtZTogJ0NoZWNraW5nIEFjY291bnQnLCBpbml0aWFsQmFsYW5jZTogMTAwLjAwIH0sXG4gICAgICAgICdzYXZpbmdzJzogeyBuYW1lOiAnU2F2aW5ncyBBY2NvdW50JywgaW5pdGlhbEJhbGFuY2U6IDAuMDAgfSxcbiAgICAgICAgJ2J1c2luZXNzJzogeyBuYW1lOiAnQnVzaW5lc3MgQWNjb3VudCcsIGluaXRpYWxCYWxhbmNlOiA1MDAuMDAgfSxcbiAgICAgICAgJ3ByZW1pdW0nOiB7IG5hbWU6ICdQcmVtaXVtIEFjY291bnQnLCBpbml0aWFsQmFsYW5jZTogMTAwMC4wMCB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjb25maWcgPSBhY2NvdW50VHlwZUNvbmZpZ1thY2NvdW50VHlwZV0gfHwgeyBuYW1lOiAnU3RhbmRhcmQgQWNjb3VudCcsIGluaXRpYWxCYWxhbmNlOiAwLjAwIH07XG5cbiAgICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSAxMC1kaWdpdCBhY2NvdW50IG51bWJlclxuICAgICAgY29uc3QgYWNjb3VudE51bWJlciA9IEFycmF5LmZyb20oe2xlbmd0aDogMTB9LCAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkpLmpvaW4oJycpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb24uaWQsXG4gICAgICAgIGFjY291bnRfbnVtYmVyOiBhY2NvdW50TnVtYmVyLFxuICAgICAgICBhY2NvdW50X3R5cGU6IGFjY291bnRUeXBlLFxuICAgICAgICBhY2NvdW50X25hbWU6IGNvbmZpZy5uYW1lLFxuICAgICAgICBiYWxhbmNlOiBjb25maWcuaW5pdGlhbEJhbGFuY2UsXG4gICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHsgZGF0YTogYWNjb3VudHMsIGVycm9yOiBhY2NvdW50c0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnYWNjb3VudHMnKVxuICAgICAgLmluc2VydChhY2NvdW50c0RhdGEpXG4gICAgICAuc2VsZWN0KCk7XG5cbiAgICBpZiAoYWNjb3VudHNFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQWNjb3VudHMgY3JlYXRpb24gZXJyb3I6JywgYWNjb3VudHNFcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgYWNjb3VudCByZWNvcmRzJyB9KTtcbiAgICB9XG5cbiAgICAvLyA0LiBDcmVhdGUgU3VwYWJhc2UgQXV0aCB1c2VyXG4gICAgY29uc3QgeyBkYXRhOiBhdXRoVXNlciwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5hdXRoLmFkbWluLmNyZWF0ZVVzZXIoe1xuICAgICAgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICBlbWFpbF9jb25maXJtOiB0cnVlLFxuICAgICAgdXNlcl9tZXRhZGF0YToge1xuICAgICAgICBmaXJzdF9uYW1lOiBmaXJzdE5hbWUsXG4gICAgICAgIGxhc3RfbmFtZTogbGFzdE5hbWUsXG4gICAgICAgIG1pZGRsZV9uYW1lOiBtaWRkbGVOYW1lLFxuICAgICAgICBhcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb24uaWQsXG4gICAgICAgIGFkbWluX2NyZWF0ZWQ6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChhdXRoRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGggdXNlciBjcmVhdGlvbiBlcnJvcjonLCBhdXRoRXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGF1dGhlbnRpY2F0aW9uIGFjY291bnQnIH0pO1xuICAgIH1cblxuICAgIC8vIDUuIENyZWF0ZSBwcm9maWxlIHJlY29yZFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yOiBwcm9maWxlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgaWQ6IGF1dGhVc2VyLnVzZXIuaWQsXG4gICAgICAgICAgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgZmlyc3RfbmFtZTogZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3RfbmFtZTogbGFzdE5hbWUsXG4gICAgICAgICAgbWlkZGxlX25hbWU6IG1pZGRsZU5hbWUsXG4gICAgICAgICAgcGhvbmU6IHBob25lLFxuICAgICAgICAgIGRhdGVfb2ZfYmlydGg6IGRhdGVPZkJpcnRoLFxuICAgICAgICAgIGNvdW50cnk6IGNvdW50cnksXG4gICAgICAgICAgYWRkcmVzczogYWRkcmVzcyxcbiAgICAgICAgICBjaXR5OiBjaXR5LFxuICAgICAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgICAgICB6aXBfY29kZTogemlwQ29kZSxcbiAgICAgICAgICBhcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb24uaWQsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuXG4gICAgICBpZiAocHJvZmlsZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Byb2ZpbGUgY3JlYXRpb24gZXJyb3I6JywgcHJvZmlsZUVycm9yKTtcbiAgICAgICAgLy8gRG9uJ3QgZmFpbCB0aGUgd2hvbGUgcHJvY2VzcyBmb3IgcHJvZmlsZSBjcmVhdGlvblxuICAgICAgfVxuICAgIH0gY2F0Y2ggKHByb2ZpbGVFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignUHJvZmlsZSBjcmVhdGlvbiBmYWlsZWQ6JywgcHJvZmlsZUVycm9yKTtcbiAgICB9XG5cbiAgICAvLyA2LiBMaW5rIGFjY291bnRzIHRvIGF1dGggdXNlclxuICAgIGNvbnN0IHsgZXJyb3I6IGxpbmtFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ2FjY291bnRzJylcbiAgICAgIC51cGRhdGUoeyB1c2VyX2lkOiBhdXRoVXNlci51c2VyLmlkIH0pXG4gICAgICAuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb24uaWQpO1xuXG4gICAgaWYgKGxpbmtFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQWNjb3VudCBsaW5raW5nIGVycm9yOicsIGxpbmtFcnJvcik7XG4gICAgICAvLyBEb24ndCBmYWlsIGZvciB0aGlzIGVycm9yXG4gICAgfVxuXG4gICAgLy8gNy4gU2VuZCB3ZWxjb21lIGVtYWlsIGlmIHJlcXVlc3RlZFxuICAgIGxldCBlbWFpbFNlbnQgPSBmYWxzZTtcbiAgICBpZiAoc2VuZEVucm9sbG1lbnRFbWFpbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZW1haWxSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3JlcS5oZWFkZXJzLm9yaWdpbn0vYXBpL3NlbmQtd2VsY29tZS1lbWFpbGAsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBhcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb24uaWQsXG4gICAgICAgICAgICBzZW5kX2Vucm9sbG1lbnQ6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZW1haWxSZXNwb25zZS5vaykge1xuICAgICAgICAgIGVtYWlsU2VudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVtYWlsRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRW1haWwgc2VuZGluZyBlcnJvcjonLCBlbWFpbEVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyA4LiBTdWNjZXNzIHJlc3BvbnNlXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ1VzZXIgYWNjb3VudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiBhcHBsaWNhdGlvbi5pZCxcbiAgICAgICAgYXV0aF9pZDogYXV0aFVzZXIudXNlci5pZCxcbiAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICBuYW1lOiBgJHtmaXJzdE5hbWV9ICR7bWlkZGxlTmFtZSA/IG1pZGRsZU5hbWUgKyAnICcgOiAnJ30ke2xhc3ROYW1lfWAsXG4gICAgICAgIGFwcGxpY2F0aW9uX3N0YXR1czogJ2FwcHJvdmVkJyxcbiAgICAgICAgY3JlYXRlZF9ieV9hZG1pbjogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGFjY291bnRzOiBhY2NvdW50cy5tYXAoYWNjID0+ICh7XG4gICAgICAgIGFjY291bnRfbnVtYmVyOiBhY2MuYWNjb3VudF9udW1iZXIsXG4gICAgICAgIGFjY291bnRfdHlwZTogYWNjLmFjY291bnRfdHlwZSxcbiAgICAgICAgYWNjb3VudF9uYW1lOiBhY2MuYWNjb3VudF9uYW1lLFxuICAgICAgICBiYWxhbmNlOiBhY2MuYmFsYW5jZVxuICAgICAgfSkpLFxuICAgICAgZW1haWxfc2VudDogZW1haWxTZW50XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBZG1pbiB1c2VyIGNyZWF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yIGR1cmluZyB1c2VyIGNyZWF0aW9uJyB9KTtcbiAgfVxufSJdLCJuYW1lcyI6WyJzdXBhYmFzZUFkbWluIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImFkbWluS2V5IiwiaGVhZGVycyIsInByb2Nlc3MiLCJlbnYiLCJBRE1JTl9TRUNSRVRfS0VZIiwiZmlyc3ROYW1lIiwibWlkZGxlTmFtZSIsImxhc3ROYW1lIiwibW90aGVyc01haWRlbk5hbWUiLCJlbWFpbCIsInBob25lIiwiZGF0ZU9mQmlydGgiLCJzc24iLCJpZE51bWJlciIsImNvdW50cnkiLCJhZGRyZXNzIiwiY2l0eSIsInN0YXRlIiwiemlwQ29kZSIsImFjY291bnRUeXBlcyIsImVtcGxveW1lbnRTdGF0dXMiLCJhbm51YWxJbmNvbWUiLCJwYXNzd29yZCIsInNlbmRFbnJvbGxtZW50RW1haWwiLCJib2R5IiwiZG9iIiwic3NuT3JJZCIsInNlbGVjdGVkQWNjb3VudFR5cGVzIiwiZGF0YSIsImV4aXN0aW5nVXNlciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImFwcGxpY2F0aW9uRGF0YSIsImZpcnN0X25hbWUiLCJtaWRkbGVfbmFtZSIsImxhc3RfbmFtZSIsIm1vdGhlcnNfbWFpZGVuX25hbWUiLCJ0b0xvd2VyQ2FzZSIsImRhdGVfb2ZfYmlydGgiLCJpZF9udW1iZXIiLCJ6aXBfY29kZSIsImFjY291bnRfdHlwZXMiLCJlbXBsb3ltZW50X3N0YXR1cyIsImFubnVhbF9pbmNvbWUiLCJwYXJzZUZsb2F0IiwiYXBwbGljYXRpb25fc3RhdHVzIiwiY3JlYXRlZF9ieV9hZG1pbiIsInN1Ym1pdHRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInByb2Nlc3NlZF9hdCIsImFwcGxpY2F0aW9uIiwiYXBwbGljYXRpb25FcnJvciIsImluc2VydCIsImNvbnNvbGUiLCJhY2NvdW50c0RhdGEiLCJtYXAiLCJhY2NvdW50VHlwZSIsImFjY291bnRUeXBlQ29uZmlnIiwibmFtZSIsImluaXRpYWxCYWxhbmNlIiwiY29uZmlnIiwiYWNjb3VudE51bWJlciIsIkFycmF5IiwibGVuZ3RoIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiam9pbiIsImFwcGxpY2F0aW9uX2lkIiwiaWQiLCJhY2NvdW50X251bWJlciIsImFjY291bnRfdHlwZSIsImFjY291bnRfbmFtZSIsImJhbGFuY2UiLCJjcmVhdGVkX2F0IiwiYWNjb3VudHMiLCJhY2NvdW50c0Vycm9yIiwiYXV0aFVzZXIiLCJhdXRoRXJyb3IiLCJhdXRoIiwiYWRtaW4iLCJjcmVhdGVVc2VyIiwiZW1haWxfY29uZmlybSIsInVzZXJfbWV0YWRhdGEiLCJhZG1pbl9jcmVhdGVkIiwicHJvZmlsZUVycm9yIiwidXNlciIsImxpbmtFcnJvciIsInVwZGF0ZSIsInVzZXJfaWQiLCJlbWFpbFNlbnQiLCJlbWFpbFJlc3BvbnNlIiwiZmV0Y2giLCJvcmlnaW4iLCJKU09OIiwic3RyaW5naWZ5Iiwic2VuZF9lbnJvbGxtZW50Iiwib2siLCJlbWFpbEVycm9yIiwibWVzc2FnZSIsImF1dGhfaWQiLCJhY2MiLCJlbWFpbF9zZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/admin/create-user.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcreate-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fcreate-user.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();