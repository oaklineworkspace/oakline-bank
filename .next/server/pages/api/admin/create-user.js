"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/create-user";
exports.ids = ["pages/api/admin/create-user"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcreate-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fcreate-user.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcreate-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fcreate-user.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_create_user_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/admin/create-user.js */ \"(api)/./pages/api/admin/create-user.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_create_user_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_create_user_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/create-user\",\n        pathname: \"/api/admin/create-user\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_admin_create_user_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGY3JlYXRlLXVzZXImcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmFkbWluJTJGY3JlYXRlLXVzZXIuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNkQ7QUFDN0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDREQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw0REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYWtsaW5lLWJhbmsvPzVmMWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9hZG1pbi9jcmVhdGUtdXNlci5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL2NyZWF0ZS11c2VyXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vY3JlYXRlLXVzZXJcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcreate-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fcreate-user.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabaseClient.js":
/*!*******************************!*\
  !*** ./lib/supabaseClient.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n// lib/supabaseClient.js\n\n// Supabase configuration - Use your environment variables\nconst supabaseUrl = \"https://nrjdmgltshosdqccaymr.supabase.co\" || 0 || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yamRtZ2x0c2hvc2RxY2NheW1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwMzYyMjAsImV4cCI6MjA3MTYxMjIyMH0.b9H553W2PCsSNvr8HyyINl4nTSrldHN_QMQ3TVwt6qk\" || 0 || 0;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_SERVICE_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yamRtZ2x0c2hvc2RxY2NheW1yIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjAzNjIyMCwiZXhwIjoyMDcxNjEyMjIwfQ.cXKwVlQNqtAE13jrgmr2RBuIwtEbxqGsVF9SiRwqV_E\";\n// Validate required environment variables\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing Supabase configuration\");\n}\n// Public client for front-end (browser)\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Server-side client with elevated privileges\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2VDbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLHdCQUF3QjtBQUM2QjtBQUVyRCwwREFBMEQ7QUFDMUQsTUFBTUMsY0FBY0MsMENBQW9DLElBQUlBLENBQXdCLElBQUk7QUFDeEYsTUFBTUksa0JBQWtCSixrTkFBeUMsSUFBSUEsQ0FBNkIsSUFBSTtBQUN0RyxNQUFNTyxxQkFBcUJQLFFBQVFDLEdBQUcsQ0FBQ08seUJBQXlCLElBQUlSLFFBQVFDLEdBQUcsQ0FBQ1Esb0JBQW9CLElBQUk7QUFFeEcsMENBQTBDO0FBQzFDLElBQUksQ0FBQ1YsZUFBZSxDQUFDSyxpQkFBaUI7SUFDcENNLFFBQVFDLEtBQUssQ0FBQztBQUNoQjtBQUVBLHdDQUF3QztBQUNqQyxNQUFNQyxXQUFXZCxtRUFBWUEsQ0FBQ0MsYUFBYUssaUJBQWlCO0FBRW5FLDhDQUE4QztBQUN2QyxNQUFNUyxnQkFBZ0JmLG1FQUFZQSxDQUFDQyxhQUFhUSxvQkFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYWtsaW5lLWJhbmsvLi9saWIvc3VwYWJhc2VDbGllbnQuanM/NWYwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIGxpYi9zdXBhYmFzZUNsaWVudC5qc1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuLy8gU3VwYWJhc2UgY29uZmlndXJhdGlvbiAtIFVzZSB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMIHx8ICdodHRwczovL25yamRtZ2x0c2hvc2RxY2NheW1yLnN1cGFiYXNlLmNvJztcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIHx8IHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZIHx8ICdleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKcGMzTWlPaUp6ZFhCaFltRnpaU0lzSW5KbFppSTZJbTV5YW1SdFoyeDBjMmh2YzJSeFkyTmhlVzF5SWl3aWNtOXNaU0k2SW1GdWIyNGlMQ0pwWVhRaU9qRTNOVFl3TXpZeU1qQXNJbVY0Y0NJNk1qQTNNVFl4TWpJeU1IMC5iOUg1NTNXMlBDc1NOdnI4SHl5SU5sNG5UU3JsZEhOX1FNUTNUVnd0NnFrJztcbmNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgfHwgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9LRVkgfHwgJ2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwYzNNaU9pSnpkWEJoWW1GelpTSXNJbkpsWmlJNkltNXlhbVJ0WjJ4MGMyaHZjMlJ4WTJOaGVXMXlJaXdpY205c1pTSTZJbk5sY25acFkyVmZjbTlzWlNJc0ltbGhkQ0k2TVRjMU5qQXpOakl5TUN3aVpYaHdJam95TURjeE5qRXlNakl3ZlEuY1hLd1ZsUU5xdEFFMTNqcmdtcjJSQnVJd3RFYnhxR3NWRjlTaVJ3cVZfRSc7XG5cbi8vIFZhbGlkYXRlIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlc1xuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgY29uZmlndXJhdGlvbicpO1xufVxuXG4vLyBQdWJsaWMgY2xpZW50IGZvciBmcm9udC1lbmQgKGJyb3dzZXIpXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7XG5cbi8vIFNlcnZlci1zaWRlIGNsaWVudCB3aXRoIGVsZXZhdGVkIHByaXZpbGVnZXNcbmV4cG9ydCBjb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXkpO1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiU1VQQUJBU0VfU0VSVklDRV9LRVkiLCJjb25zb2xlIiwiZXJyb3IiLCJzdXBhYmFzZSIsInN1cGFiYXNlQWRtaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/supabaseClient.js\n");

/***/ }),

/***/ "(api)/./pages/api/admin/create-user.js":
/*!****************************************!*\
  !*** ./pages/api/admin/create-user.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/supabaseClient */ \"(api)/./lib/supabaseClient.js\");\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    // Basic admin check - in production, you'd want proper admin authentication\n    const adminKey = req.headers[\"x-admin-key\"];\n    if (adminKey !== process.env.ADMIN_SECRET_KEY) {\n        return res.status(401).json({\n            error: \"Unauthorized - Invalid admin credentials\"\n        });\n    }\n    const { firstName, middleName, lastName, mothersMaidenName, email, phone, dateOfBirth, ssn, idNumber, country, address, city, state, zipCode, accountTypes, employmentStatus, annualIncome, password, sendEnrollmentEmail = true } = req.body;\n    // Map frontend field names to expected names\n    const dob = dateOfBirth;\n    const ssnOrId = country === \"US\" ? ssn : idNumber;\n    const selectedAccountTypes = accountTypes;\n    // Validation\n    if (!firstName || !lastName || !email || !dob || !address || !city || !state || !zipCode || !selectedAccountTypes || !annualIncome || !password) {\n        return res.status(400).json({\n            error: \"Missing required fields: firstName, lastName, email, dateOfBirth, address, city, state, zipCode, accountTypes, annualIncome, password\"\n        });\n    }\n    if (!ssnOrId) {\n        return res.status(400).json({\n            error: `Missing required field: ${country === \"US\" ? \"SSN\" : \"ID Number\"} is required`\n        });\n    }\n    try {\n        // 1. Check if user already exists\n        const { data: existingUser } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"applications\").select(\"email\").eq(\"email\", email).single();\n        if (existingUser) {\n            return res.status(409).json({\n                error: \"User with this email already exists\"\n            });\n        }\n        // Map account type IDs to enum values\n        const ACCOUNT_TYPE_MAPPING = {\n            1: \"checking_account\",\n            2: \"savings_account\",\n            3: \"business_checking\",\n            4: \"business_savings\",\n            5: \"student_checking\",\n            6: \"money_market\",\n            7: \"certificate_of_deposit\",\n            8: \"retirement_ira\",\n            9: \"joint_checking\",\n            10: \"trust_account\",\n            11: \"investment_brokerage\",\n            12: \"high_yield_savings\",\n            13: \"international_checking\",\n            14: \"foreign_currency\",\n            15: \"cryptocurrency_wallet\",\n            16: \"loan_repayment\",\n            17: \"mortgage\",\n            18: \"auto_loan\",\n            19: \"credit_card\",\n            20: \"prepaid_card\",\n            21: \"payroll_account\",\n            22: \"nonprofit_charity\",\n            23: \"escrow_account\"\n        };\n        const mappedAccountTypes = accountTypes.map((id)=>ACCOUNT_TYPE_MAPPING[id]).filter(Boolean);\n        // 2. Create application record\n        const applicationData = {\n            first_name: firstName,\n            middle_name: middleName || null,\n            last_name: lastName,\n            mothers_maiden_name: mothersMaidenName || null,\n            email: email.toLowerCase(),\n            phone: phone || null,\n            date_of_birth: dateOfBirth,\n            ssn: country === \"US\" ? ssn : null,\n            id_number: country !== \"US\" ? idNumber : null,\n            country: country,\n            address: address,\n            city: city,\n            state: state,\n            zip_code: zipCode,\n            account_types: mappedAccountTypes,\n            employment_status: employmentStatus,\n            annual_income: annualIncome || \"under_25k\",\n            application_status: \"approved\",\n            created_by_admin: true,\n            submitted_at: new Date().toISOString(),\n            processed_at: new Date().toISOString()\n        };\n        console.log(\"Creating application with data:\", {\n            first_name: firstName,\n            last_name: lastName,\n            email: email.toLowerCase(),\n            phone: phone || null,\n            date_of_birth: dateOfBirth,\n            ssn: country === \"US\" ? ssn : null,\n            id_number: country !== \"US\" ? idNumber : null,\n            country: country,\n            address: address,\n            city: city,\n            state: state,\n            zip_code: zipCode,\n            account_types: mappedAccountTypes,\n            employment_status: employmentStatus,\n            annual_income: annualIncome || \"under_25k\",\n            application_status: \"approved\",\n            created_by_admin: true,\n            submitted_at: new Date().toISOString(),\n            processed_at: new Date().toISOString()\n        });\n        const { data: application, error: applicationError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"applications\").insert([\n            applicationData\n        ]).select().single();\n        if (applicationError) {\n            console.error(\"Application creation error:\", applicationError);\n            return res.status(500).json({\n                error: \"Failed to create application record\"\n            });\n        }\n        console.log(\"Application created successfully:\", application);\n        // 3. Create accounts for each selected account type\n        const accountsData = mappedAccountTypes.map((accountType)=>{\n            const accountTypeConfig = {\n                \"checking_account\": {\n                    name: \"Checking Account\",\n                    initialBalance: 100.00\n                },\n                \"savings_account\": {\n                    name: \"Savings Account\",\n                    initialBalance: 0.00\n                },\n                \"business_checking\": {\n                    name: \"Business Checking\",\n                    initialBalance: 500.00\n                },\n                \"business_savings\": {\n                    name: \"Business Savings\",\n                    initialBalance: 250.00\n                },\n                \"student_checking\": {\n                    name: \"Student Checking\",\n                    initialBalance: 25.00\n                },\n                \"money_market\": {\n                    name: \"Money Market Account\",\n                    initialBalance: 1000.00\n                },\n                \"certificate_of_deposit\": {\n                    name: \"Certificate of Deposit\",\n                    initialBalance: 5000.00\n                },\n                \"retirement_ira\": {\n                    name: \"IRA Account\",\n                    initialBalance: 0.00\n                },\n                \"joint_checking\": {\n                    name: \"Joint Checking\",\n                    initialBalance: 100.00\n                },\n                \"trust_account\": {\n                    name: \"Trust Account\",\n                    initialBalance: 10000.00\n                },\n                \"investment_brokerage\": {\n                    name: \"Investment Account\",\n                    initialBalance: 2500.00\n                },\n                \"high_yield_savings\": {\n                    name: \"High-Yield Savings\",\n                    initialBalance: 500.00\n                },\n                \"international_checking\": {\n                    name: \"International Checking\",\n                    initialBalance: 100.00\n                },\n                \"foreign_currency\": {\n                    name: \"Foreign Currency Account\",\n                    initialBalance: 0.00\n                },\n                \"cryptocurrency_wallet\": {\n                    name: \"Crypto Wallet\",\n                    initialBalance: 0.00\n                },\n                \"loan_repayment\": {\n                    name: \"Loan Repayment Account\",\n                    initialBalance: 0.00\n                },\n                \"mortgage\": {\n                    name: \"Mortgage Account\",\n                    initialBalance: 0.00\n                },\n                \"auto_loan\": {\n                    name: \"Auto Loan Account\",\n                    initialBalance: 0.00\n                },\n                \"credit_card\": {\n                    name: \"Credit Card Account\",\n                    initialBalance: 0.00\n                },\n                \"prepaid_card\": {\n                    name: \"Prepaid Card\",\n                    initialBalance: 50.00\n                },\n                \"payroll_account\": {\n                    name: \"Payroll Account\",\n                    initialBalance: 0.00\n                },\n                \"nonprofit_charity\": {\n                    name: \"Nonprofit Account\",\n                    initialBalance: 100.00\n                },\n                \"escrow_account\": {\n                    name: \"Escrow Account\",\n                    initialBalance: 0.00\n                }\n            };\n            const config = accountTypeConfig[accountType] || {\n                name: \"Standard Account\",\n                initialBalance: 0.00\n            };\n            // Generate unique 10-digit account number\n            const accountNumber = Array.from({\n                length: 10\n            }, ()=>Math.floor(Math.random() * 10)).join(\"\");\n            return {\n                application_id: application.id,\n                account_number: accountNumber,\n                account_type: accountType,\n                account_name: config.name,\n                balance: config.initialBalance,\n                status: \"active\",\n                routing_number: \"075915826\",\n                created_at: new Date().toISOString()\n            };\n        });\n        const { data: accounts, error: accountsError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"accounts\").insert(accountsData).select();\n        if (accountsError) {\n            console.error(\"Accounts creation error:\", accountsError);\n            return res.status(500).json({\n                error: \"Failed to create account records\"\n            });\n        }\n        // 4. Create Supabase Auth user\n        const { data: authUser, error: authError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.admin.createUser({\n            email: email.toLowerCase(),\n            password: password,\n            email_confirm: true,\n            user_metadata: {\n                first_name: firstName,\n                last_name: lastName,\n                middle_name: middleName,\n                application_id: application.id,\n                admin_created: true\n            }\n        });\n        if (authError) {\n            console.error(\"Auth user creation error:\", authError);\n            return res.status(500).json({\n                error: \"Failed to create authentication account\"\n            });\n        }\n        // 5. Create profile record\n        try {\n            const { error: profileError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"profiles\").insert({\n                id: authUser.user.id,\n                email: email.toLowerCase(),\n                first_name: firstName,\n                last_name: lastName,\n                middle_name: middleName,\n                phone: phone,\n                date_of_birth: dateOfBirth,\n                country: country,\n                address: address,\n                city: city,\n                state: state,\n                zip_code: zipCode,\n                application_id: application.id,\n                created_at: new Date().toISOString()\n            });\n            if (profileError) {\n                console.error(\"Profile creation error:\", profileError);\n            // Don't fail the whole process for profile creation\n            }\n        } catch (profileError) {\n            console.error(\"Profile creation failed:\", profileError);\n        }\n        // 6. Link accounts to auth user\n        const { error: linkError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"accounts\").update({\n            user_id: authUser.user.id\n        }).eq(\"application_id\", application.id);\n        if (linkError) {\n            console.error(\"Account linking error:\", linkError);\n        // Don't fail for this error\n        }\n        // 7. Send welcome email if requested\n        let emailSent = false;\n        if (sendEnrollmentEmail) {\n            try {\n                const emailResponse = await fetch(`${req.headers.origin}/api/send-welcome-email`, {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        application_id: application.id,\n                        send_enrollment: true\n                    })\n                });\n                if (emailResponse.ok) {\n                    emailSent = true;\n                }\n            } catch (emailError) {\n                console.error(\"Email sending error:\", emailError);\n            }\n        }\n        // 8. Success response\n        res.status(201).json({\n            message: \"User account created successfully\",\n            userId: authUser.user.id,\n            user: {\n                id: application.id,\n                auth_id: authUser.user.id,\n                email: email,\n                name: `${firstName} ${middleName ? middleName + \" \" : \"\"}${lastName}`,\n                application_status: \"approved\",\n                created_by_admin: true\n            },\n            accounts: accounts.map((acc)=>({\n                    account_number: acc.account_number,\n                    account_type: acc.account_type,\n                    account_name: acc.account_name,\n                    balance: acc.balance\n                })),\n            email_sent: emailSent\n        });\n    } catch (error) {\n        console.error(\"Admin user creation error:\", error);\n        res.status(500).json({\n            error: \"Internal server error during user creation\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ekI1QixPQUFPQTtnQkFDUHlELE1BQU0sQ0FBQyxFQUFFN0QsVUFBVSxDQUFDLEVBQUVDLGFBQWFBLGFBQWEsTUFBTSxHQUFHLEVBQUVDLFNBQVMsQ0FBQztnQkFDckU2QyxvQkFBb0I7Z0JBQ3BCQyxrQkFBa0I7WUFDcEI7WUFDQThCLFVBQVVBLFNBQVMvQyxHQUFHLENBQUMwRSxDQUFBQSxNQUFRO29CQUM3QmpDLGdCQUFnQmlDLElBQUlqQyxjQUFjO29CQUNsQ0MsY0FBY2dDLElBQUloQyxZQUFZO29CQUM5QkMsY0FBYytCLElBQUkvQixZQUFZO29CQUM5QkMsU0FBUzhCLElBQUk5QixPQUFPO2dCQUN0QjtZQUNBK0IsWUFBWWI7UUFDZDtJQUVGLEVBQUUsT0FBT25HLE9BQU87UUFDZDJELFFBQVEzRCxLQUFLLENBQUMsOEJBQThCQTtRQUM1Q0osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQTZDO0lBQzdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYWtsaW5lLWJhbmsvLi9wYWdlcy9hcGkvYWRtaW4vY3JlYXRlLXVzZXIuanM/YzljZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZUFkbWluIH0gZnJvbSAnLi4vLi4vLi4vbGliL3N1cGFiYXNlQ2xpZW50JztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgLy8gQmFzaWMgYWRtaW4gY2hlY2sgLSBpbiBwcm9kdWN0aW9uLCB5b3UnZCB3YW50IHByb3BlciBhZG1pbiBhdXRoZW50aWNhdGlvblxuICBjb25zdCBhZG1pbktleSA9IHJlcS5oZWFkZXJzWyd4LWFkbWluLWtleSddO1xuICBpZiAoYWRtaW5LZXkgIT09IHByb2Nlc3MuZW52LkFETUlOX1NFQ1JFVF9LRVkpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCAtIEludmFsaWQgYWRtaW4gY3JlZGVudGlhbHMnIH0pO1xuICB9XG5cbiAgY29uc3Qge1xuICAgIGZpcnN0TmFtZSxcbiAgICBtaWRkbGVOYW1lLFxuICAgIGxhc3ROYW1lLFxuICAgIG1vdGhlcnNNYWlkZW5OYW1lLFxuICAgIGVtYWlsLFxuICAgIHBob25lLFxuICAgIGRhdGVPZkJpcnRoLFxuICAgIHNzbixcbiAgICBpZE51bWJlcixcbiAgICBjb3VudHJ5LFxuICAgIGFkZHJlc3MsXG4gICAgY2l0eSxcbiAgICBzdGF0ZSxcbiAgICB6aXBDb2RlLFxuICAgIGFjY291bnRUeXBlcyxcbiAgICBlbXBsb3ltZW50U3RhdHVzLFxuICAgIGFubnVhbEluY29tZSxcbiAgICBwYXNzd29yZCxcbiAgICBzZW5kRW5yb2xsbWVudEVtYWlsID0gdHJ1ZVxuICB9ID0gcmVxLmJvZHk7XG5cbiAgLy8gTWFwIGZyb250ZW5kIGZpZWxkIG5hbWVzIHRvIGV4cGVjdGVkIG5hbWVzXG4gIGNvbnN0IGRvYiA9IGRhdGVPZkJpcnRoO1xuICBjb25zdCBzc25PcklkID0gY291bnRyeSA9PT0gJ1VTJyA/IHNzbiA6IGlkTnVtYmVyO1xuICBjb25zdCBzZWxlY3RlZEFjY291bnRUeXBlcyA9IGFjY291bnRUeXBlcztcblxuICAvLyBWYWxpZGF0aW9uXG4gIGlmICghZmlyc3ROYW1lIHx8ICFsYXN0TmFtZSB8fCAhZW1haWwgfHwgIWRvYiB8fCAhYWRkcmVzcyB8fCAhY2l0eSB8fCAhc3RhdGUgfHwgIXppcENvZGUgfHwgIXNlbGVjdGVkQWNjb3VudFR5cGVzIHx8ICFhbm51YWxJbmNvbWUgfHwgIXBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIGRhdGVPZkJpcnRoLCBhZGRyZXNzLCBjaXR5LCBzdGF0ZSwgemlwQ29kZSwgYWNjb3VudFR5cGVzLCBhbm51YWxJbmNvbWUsIHBhc3N3b3JkJyB9KTtcbiAgfVxuXG4gIGlmICghc3NuT3JJZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBgTWlzc2luZyByZXF1aXJlZCBmaWVsZDogJHtjb3VudHJ5ID09PSAnVVMnID8gJ1NTTicgOiAnSUQgTnVtYmVyJ30gaXMgcmVxdWlyZWRgIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyAxLiBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1VzZXIgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbnMnKVxuICAgICAgLnNlbGVjdCgnZW1haWwnKVxuICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgZXJyb3I6ICdVc2VyIHdpdGggdGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0cycgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFwIGFjY291bnQgdHlwZSBJRHMgdG8gZW51bSB2YWx1ZXNcbiAgICBjb25zdCBBQ0NPVU5UX1RZUEVfTUFQUElORyA9IHtcbiAgICAgIDE6ICdjaGVja2luZ19hY2NvdW50JyxcbiAgICAgIDI6ICdzYXZpbmdzX2FjY291bnQnLCBcbiAgICAgIDM6ICdidXNpbmVzc19jaGVja2luZycsXG4gICAgICA0OiAnYnVzaW5lc3Nfc2F2aW5ncycsXG4gICAgICA1OiAnc3R1ZGVudF9jaGVja2luZycsXG4gICAgICA2OiAnbW9uZXlfbWFya2V0JyxcbiAgICAgIDc6ICdjZXJ0aWZpY2F0ZV9vZl9kZXBvc2l0JyxcbiAgICAgIDg6ICdyZXRpcmVtZW50X2lyYScsXG4gICAgICA5OiAnam9pbnRfY2hlY2tpbmcnLFxuICAgICAgMTA6ICd0cnVzdF9hY2NvdW50JyxcbiAgICAgIDExOiAnaW52ZXN0bWVudF9icm9rZXJhZ2UnLFxuICAgICAgMTI6ICdoaWdoX3lpZWxkX3NhdmluZ3MnLFxuICAgICAgMTM6ICdpbnRlcm5hdGlvbmFsX2NoZWNraW5nJyxcbiAgICAgIDE0OiAnZm9yZWlnbl9jdXJyZW5jeScsXG4gICAgICAxNTogJ2NyeXB0b2N1cnJlbmN5X3dhbGxldCcsXG4gICAgICAxNjogJ2xvYW5fcmVwYXltZW50JyxcbiAgICAgIDE3OiAnbW9ydGdhZ2UnLFxuICAgICAgMTg6ICdhdXRvX2xvYW4nLFxuICAgICAgMTk6ICdjcmVkaXRfY2FyZCcsXG4gICAgICAyMDogJ3ByZXBhaWRfY2FyZCcsXG4gICAgICAyMTogJ3BheXJvbGxfYWNjb3VudCcsXG4gICAgICAyMjogJ25vbnByb2ZpdF9jaGFyaXR5JyxcbiAgICAgIDIzOiAnZXNjcm93X2FjY291bnQnXG4gICAgfTtcblxuICAgIGNvbnN0IG1hcHBlZEFjY291bnRUeXBlcyA9IGFjY291bnRUeXBlcy5tYXAoaWQgPT4gQUNDT1VOVF9UWVBFX01BUFBJTkdbaWRdKS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAvLyAyLiBDcmVhdGUgYXBwbGljYXRpb24gcmVjb3JkXG4gICAgY29uc3QgYXBwbGljYXRpb25EYXRhID0ge1xuICAgICAgZmlyc3RfbmFtZTogZmlyc3ROYW1lLFxuICAgICAgbWlkZGxlX25hbWU6IG1pZGRsZU5hbWUgfHwgbnVsbCxcbiAgICAgIGxhc3RfbmFtZTogbGFzdE5hbWUsXG4gICAgICBtb3RoZXJzX21haWRlbl9uYW1lOiBtb3RoZXJzTWFpZGVuTmFtZSB8fCBudWxsLFxuICAgICAgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICBwaG9uZTogcGhvbmUgfHwgbnVsbCxcbiAgICAgIGRhdGVfb2ZfYmlydGg6IGRhdGVPZkJpcnRoLFxuICAgICAgc3NuOiBjb3VudHJ5ID09PSAnVVMnID8gc3NuIDogbnVsbCxcbiAgICAgIGlkX251bWJlcjogY291bnRyeSAhPT0gJ1VTJyA/IGlkTnVtYmVyIDogbnVsbCxcbiAgICAgIGNvdW50cnk6IGNvdW50cnksXG4gICAgICBhZGRyZXNzOiBhZGRyZXNzLFxuICAgICAgY2l0eTogY2l0eSxcbiAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgIHppcF9jb2RlOiB6aXBDb2RlLFxuICAgICAgYWNjb3VudF90eXBlczogbWFwcGVkQWNjb3VudFR5cGVzLFxuICAgICAgZW1wbG95bWVudF9zdGF0dXM6IGVtcGxveW1lbnRTdGF0dXMsXG4gICAgICBhbm51YWxfaW5jb21lOiBhbm51YWxJbmNvbWUgfHwgJ3VuZGVyXzI1aycsXG4gICAgICBhcHBsaWNhdGlvbl9zdGF0dXM6ICdhcHByb3ZlZCcsIC8vIEFkbWluIGNyZWF0ZWQgYXBwbGljYXRpb25zIGFyZSBwcmUtYXBwcm92ZWRcbiAgICAgIGNyZWF0ZWRfYnlfYWRtaW46IHRydWUsXG4gICAgICBzdWJtaXR0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHByb2Nlc3NlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBhcHBsaWNhdGlvbiB3aXRoIGRhdGE6Jywge1xuICAgICAgZmlyc3RfbmFtZTogZmlyc3ROYW1lLFxuICAgICAgbGFzdF9uYW1lOiBsYXN0TmFtZSxcbiAgICAgIGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgcGhvbmU6IHBob25lIHx8IG51bGwsXG4gICAgICBkYXRlX29mX2JpcnRoOiBkYXRlT2ZCaXJ0aCxcbiAgICAgIHNzbjogY291bnRyeSA9PT0gJ1VTJyA/IHNzbiA6IG51bGwsXG4gICAgICBpZF9udW1iZXI6IGNvdW50cnkgIT09ICdVUycgPyBpZE51bWJlciA6IG51bGwsXG4gICAgICBjb3VudHJ5OiBjb3VudHJ5LFxuICAgICAgYWRkcmVzczogYWRkcmVzcyxcbiAgICAgIGNpdHk6IGNpdHksXG4gICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICB6aXBfY29kZTogemlwQ29kZSxcbiAgICAgIGFjY291bnRfdHlwZXM6IG1hcHBlZEFjY291bnRUeXBlcyxcbiAgICAgIGVtcGxveW1lbnRfc3RhdHVzOiBlbXBsb3ltZW50U3RhdHVzLFxuICAgICAgYW5udWFsX2luY29tZTogYW5udWFsSW5jb21lIHx8ICd1bmRlcl8yNWsnLFxuICAgICAgYXBwbGljYXRpb25fc3RhdHVzOiAnYXBwcm92ZWQnLFxuICAgICAgY3JlYXRlZF9ieV9hZG1pbjogdHJ1ZSxcbiAgICAgIHN1Ym1pdHRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgcHJvY2Vzc2VkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcblxuICAgIGNvbnN0IHsgZGF0YTogYXBwbGljYXRpb24sIGVycm9yOiBhcHBsaWNhdGlvbkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnYXBwbGljYXRpb25zJylcbiAgICAgIC5pbnNlcnQoW2FwcGxpY2F0aW9uRGF0YV0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChhcHBsaWNhdGlvbkVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBcHBsaWNhdGlvbiBjcmVhdGlvbiBlcnJvcjonLCBhcHBsaWNhdGlvbkVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBhcHBsaWNhdGlvbiByZWNvcmQnIH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdBcHBsaWNhdGlvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseTonLCBhcHBsaWNhdGlvbik7XG5cbiAgICAvLyAzLiBDcmVhdGUgYWNjb3VudHMgZm9yIGVhY2ggc2VsZWN0ZWQgYWNjb3VudCB0eXBlXG4gICAgY29uc3QgYWNjb3VudHNEYXRhID0gbWFwcGVkQWNjb3VudFR5cGVzLm1hcChhY2NvdW50VHlwZSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50VHlwZUNvbmZpZyA9IHtcbiAgICAgICAgJ2NoZWNraW5nX2FjY291bnQnOiB7IG5hbWU6ICdDaGVja2luZyBBY2NvdW50JywgaW5pdGlhbEJhbGFuY2U6IDEwMC4wMCB9LFxuICAgICAgICAnc2F2aW5nc19hY2NvdW50JzogeyBuYW1lOiAnU2F2aW5ncyBBY2NvdW50JywgaW5pdGlhbEJhbGFuY2U6IDAuMDAgfSxcbiAgICAgICAgJ2J1c2luZXNzX2NoZWNraW5nJzogeyBuYW1lOiAnQnVzaW5lc3MgQ2hlY2tpbmcnLCBpbml0aWFsQmFsYW5jZTogNTAwLjAwIH0sXG4gICAgICAgICdidXNpbmVzc19zYXZpbmdzJzogeyBuYW1lOiAnQnVzaW5lc3MgU2F2aW5ncycsIGluaXRpYWxCYWxhbmNlOiAyNTAuMDAgfSxcbiAgICAgICAgJ3N0dWRlbnRfY2hlY2tpbmcnOiB7IG5hbWU6ICdTdHVkZW50IENoZWNraW5nJywgaW5pdGlhbEJhbGFuY2U6IDI1LjAwIH0sXG4gICAgICAgICdtb25leV9tYXJrZXQnOiB7IG5hbWU6ICdNb25leSBNYXJrZXQgQWNjb3VudCcsIGluaXRpYWxCYWxhbmNlOiAxMDAwLjAwIH0sXG4gICAgICAgICdjZXJ0aWZpY2F0ZV9vZl9kZXBvc2l0JzogeyBuYW1lOiAnQ2VydGlmaWNhdGUgb2YgRGVwb3NpdCcsIGluaXRpYWxCYWxhbmNlOiA1MDAwLjAwIH0sXG4gICAgICAgICdyZXRpcmVtZW50X2lyYSc6IHsgbmFtZTogJ0lSQSBBY2NvdW50JywgaW5pdGlhbEJhbGFuY2U6IDAuMDAgfSxcbiAgICAgICAgJ2pvaW50X2NoZWNraW5nJzogeyBuYW1lOiAnSm9pbnQgQ2hlY2tpbmcnLCBpbml0aWFsQmFsYW5jZTogMTAwLjAwIH0sXG4gICAgICAgICd0cnVzdF9hY2NvdW50JzogeyBuYW1lOiAnVHJ1c3QgQWNjb3VudCcsIGluaXRpYWxCYWxhbmNlOiAxMDAwMC4wMCB9LFxuICAgICAgICAnaW52ZXN0bWVudF9icm9rZXJhZ2UnOiB7IG5hbWU6ICdJbnZlc3RtZW50IEFjY291bnQnLCBpbml0aWFsQmFsYW5jZTogMjUwMC4wMCB9LFxuICAgICAgICAnaGlnaF95aWVsZF9zYXZpbmdzJzogeyBuYW1lOiAnSGlnaC1ZaWVsZCBTYXZpbmdzJywgaW5pdGlhbEJhbGFuY2U6IDUwMC4wMCB9LFxuICAgICAgICAnaW50ZXJuYXRpb25hbF9jaGVja2luZyc6IHsgbmFtZTogJ0ludGVybmF0aW9uYWwgQ2hlY2tpbmcnLCBpbml0aWFsQmFsYW5jZTogMTAwLjAwIH0sXG4gICAgICAgICdmb3JlaWduX2N1cnJlbmN5JzogeyBuYW1lOiAnRm9yZWlnbiBDdXJyZW5jeSBBY2NvdW50JywgaW5pdGlhbEJhbGFuY2U6IDAuMDAgfSxcbiAgICAgICAgJ2NyeXB0b2N1cnJlbmN5X3dhbGxldCc6IHsgbmFtZTogJ0NyeXB0byBXYWxsZXQnLCBpbml0aWFsQmFsYW5jZTogMC4wMCB9LFxuICAgICAgICAnbG9hbl9yZXBheW1lbnQnOiB7IG5hbWU6ICdMb2FuIFJlcGF5bWVudCBBY2NvdW50JywgaW5pdGlhbEJhbGFuY2U6IDAuMDAgfSxcbiAgICAgICAgJ21vcnRnYWdlJzogeyBuYW1lOiAnTW9ydGdhZ2UgQWNjb3VudCcsIGluaXRpYWxCYWxhbmNlOiAwLjAwIH0sXG4gICAgICAgICdhdXRvX2xvYW4nOiB7IG5hbWU6ICdBdXRvIExvYW4gQWNjb3VudCcsIGluaXRpYWxCYWxhbmNlOiAwLjAwIH0sXG4gICAgICAgICdjcmVkaXRfY2FyZCc6IHsgbmFtZTogJ0NyZWRpdCBDYXJkIEFjY291bnQnLCBpbml0aWFsQmFsYW5jZTogMC4wMCB9LFxuICAgICAgICAncHJlcGFpZF9jYXJkJzogeyBuYW1lOiAnUHJlcGFpZCBDYXJkJywgaW5pdGlhbEJhbGFuY2U6IDUwLjAwIH0sXG4gICAgICAgICdwYXlyb2xsX2FjY291bnQnOiB7IG5hbWU6ICdQYXlyb2xsIEFjY291bnQnLCBpbml0aWFsQmFsYW5jZTogMC4wMCB9LFxuICAgICAgICAnbm9ucHJvZml0X2NoYXJpdHknOiB7IG5hbWU6ICdOb25wcm9maXQgQWNjb3VudCcsIGluaXRpYWxCYWxhbmNlOiAxMDAuMDAgfSxcbiAgICAgICAgJ2VzY3Jvd19hY2NvdW50JzogeyBuYW1lOiAnRXNjcm93IEFjY291bnQnLCBpbml0aWFsQmFsYW5jZTogMC4wMCB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjb25maWcgPSBhY2NvdW50VHlwZUNvbmZpZ1thY2NvdW50VHlwZV0gfHwgeyBuYW1lOiAnU3RhbmRhcmQgQWNjb3VudCcsIGluaXRpYWxCYWxhbmNlOiAwLjAwIH07XG5cbiAgICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSAxMC1kaWdpdCBhY2NvdW50IG51bWJlclxuICAgICAgY29uc3QgYWNjb3VudE51bWJlciA9IEFycmF5LmZyb20oe2xlbmd0aDogMTB9LCAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkpLmpvaW4oJycpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb24uaWQsXG4gICAgICAgIGFjY291bnRfbnVtYmVyOiBhY2NvdW50TnVtYmVyLFxuICAgICAgICBhY2NvdW50X3R5cGU6IGFjY291bnRUeXBlLFxuICAgICAgICBhY2NvdW50X25hbWU6IGNvbmZpZy5uYW1lLFxuICAgICAgICBiYWxhbmNlOiBjb25maWcuaW5pdGlhbEJhbGFuY2UsXG4gICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXG4gICAgICAgIHJvdXRpbmdfbnVtYmVyOiAnMDc1OTE1ODI2JyxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgY29uc3QgeyBkYXRhOiBhY2NvdW50cywgZXJyb3I6IGFjY291bnRzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdhY2NvdW50cycpXG4gICAgICAuaW5zZXJ0KGFjY291bnRzRGF0YSlcbiAgICAgIC5zZWxlY3QoKTtcblxuICAgIGlmIChhY2NvdW50c0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBY2NvdW50cyBjcmVhdGlvbiBlcnJvcjonLCBhY2NvdW50c0Vycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBhY2NvdW50IHJlY29yZHMnIH0pO1xuICAgIH1cblxuICAgIC8vIDQuIENyZWF0ZSBTdXBhYmFzZSBBdXRoIHVzZXJcbiAgICBjb25zdCB7IGRhdGE6IGF1dGhVc2VyLCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluLmF1dGguYWRtaW4uY3JlYXRlVXNlcih7XG4gICAgICBlbWFpbDogZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgIGVtYWlsX2NvbmZpcm06IHRydWUsXG4gICAgICB1c2VyX21ldGFkYXRhOiB7XG4gICAgICAgIGZpcnN0X25hbWU6IGZpcnN0TmFtZSxcbiAgICAgICAgbGFzdF9uYW1lOiBsYXN0TmFtZSxcbiAgICAgICAgbWlkZGxlX25hbWU6IG1pZGRsZU5hbWUsXG4gICAgICAgIGFwcGxpY2F0aW9uX2lkOiBhcHBsaWNhdGlvbi5pZCxcbiAgICAgICAgYWRtaW5fY3JlYXRlZDogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGF1dGhFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQXV0aCB1c2VyIGNyZWF0aW9uIGVycm9yOicsIGF1dGhFcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgYXV0aGVudGljYXRpb24gYWNjb3VudCcgfSk7XG4gICAgfVxuXG4gICAgLy8gNS4gQ3JlYXRlIHByb2ZpbGUgcmVjb3JkXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgncHJvZmlsZXMnKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICBpZDogYXV0aFVzZXIudXNlci5pZCxcbiAgICAgICAgICBlbWFpbDogZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBmaXJzdF9uYW1lOiBmaXJzdE5hbWUsXG4gICAgICAgICAgbGFzdF9uYW1lOiBsYXN0TmFtZSxcbiAgICAgICAgICBtaWRkbGVfbmFtZTogbWlkZGxlTmFtZSxcbiAgICAgICAgICBwaG9uZTogcGhvbmUsXG4gICAgICAgICAgZGF0ZV9vZl9iaXJ0aDogZGF0ZU9mQmlydGgsXG4gICAgICAgICAgY291bnRyeTogY291bnRyeSxcbiAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLFxuICAgICAgICAgIGNpdHk6IGNpdHksXG4gICAgICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgICAgIHppcF9jb2RlOiB6aXBDb2RlLFxuICAgICAgICAgIGFwcGxpY2F0aW9uX2lkOiBhcHBsaWNhdGlvbi5pZCxcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmIChwcm9maWxlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignUHJvZmlsZSBjcmVhdGlvbiBlcnJvcjonLCBwcm9maWxlRXJyb3IpO1xuICAgICAgICAvLyBEb24ndCBmYWlsIHRoZSB3aG9sZSBwcm9jZXNzIGZvciBwcm9maWxlIGNyZWF0aW9uXG4gICAgICB9XG4gICAgfSBjYXRjaCAocHJvZmlsZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQcm9maWxlIGNyZWF0aW9uIGZhaWxlZDonLCBwcm9maWxlRXJyb3IpO1xuICAgIH1cblxuICAgIC8vIDYuIExpbmsgYWNjb3VudHMgdG8gYXV0aCB1c2VyXG4gICAgY29uc3QgeyBlcnJvcjogbGlua0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnYWNjb3VudHMnKVxuICAgICAgLnVwZGF0ZSh7IHVzZXJfaWQ6IGF1dGhVc2VyLnVzZXIuaWQgfSlcbiAgICAgIC5lcSgnYXBwbGljYXRpb25faWQnLCBhcHBsaWNhdGlvbi5pZCk7XG5cbiAgICBpZiAobGlua0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBY2NvdW50IGxpbmtpbmcgZXJyb3I6JywgbGlua0Vycm9yKTtcbiAgICAgIC8vIERvbid0IGZhaWwgZm9yIHRoaXMgZXJyb3JcbiAgICB9XG5cbiAgICAvLyA3LiBTZW5kIHdlbGNvbWUgZW1haWwgaWYgcmVxdWVzdGVkXG4gICAgbGV0IGVtYWlsU2VudCA9IGZhbHNlO1xuICAgIGlmIChzZW5kRW5yb2xsbWVudEVtYWlsKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBlbWFpbFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7cmVxLmhlYWRlcnMub3JpZ2lufS9hcGkvc2VuZC13ZWxjb21lLWVtYWlsYCwge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uX2lkOiBhcHBsaWNhdGlvbi5pZCxcbiAgICAgICAgICAgIHNlbmRfZW5yb2xsbWVudDogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChlbWFpbFJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgZW1haWxTZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZW1haWxFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFbWFpbCBzZW5kaW5nIGVycm9yOicsIGVtYWlsRXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDguIFN1Y2Nlc3MgcmVzcG9uc2VcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICBtZXNzYWdlOiAnVXNlciBhY2NvdW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIHVzZXJJZDogYXV0aFVzZXIudXNlci5pZCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IGFwcGxpY2F0aW9uLmlkLFxuICAgICAgICBhdXRoX2lkOiBhdXRoVXNlci51c2VyLmlkLFxuICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgIG5hbWU6IGAke2ZpcnN0TmFtZX0gJHttaWRkbGVOYW1lID8gbWlkZGxlTmFtZSArICcgJyA6ICcnfSR7bGFzdE5hbWV9YCxcbiAgICAgICAgYXBwbGljYXRpb25fc3RhdHVzOiAnYXBwcm92ZWQnLFxuICAgICAgICBjcmVhdGVkX2J5X2FkbWluOiB0cnVlXG4gICAgICB9LFxuICAgICAgYWNjb3VudHM6IGFjY291bnRzLm1hcChhY2MgPT4gKHtcbiAgICAgICAgYWNjb3VudF9udW1iZXI6IGFjYy5hY2NvdW50X251bWJlcixcbiAgICAgICAgYWNjb3VudF90eXBlOiBhY2MuYWNjb3VudF90eXBlLFxuICAgICAgICBhY2NvdW50X25hbWU6IGFjYy5hY2NvdW50X25hbWUsXG4gICAgICAgIGJhbGFuY2U6IGFjYy5iYWxhbmNlXG4gICAgICB9KSksXG4gICAgICBlbWFpbF9zZW50OiBlbWFpbFNlbnRcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FkbWluIHVzZXIgY3JlYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IgZHVyaW5nIHVzZXIgY3JlYXRpb24nIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbInN1cGFiYXNlQWRtaW4iLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiYWRtaW5LZXkiLCJoZWFkZXJzIiwicHJvY2VzcyIsImVudiIsIkFETUlOX1NFQ1JFVF9LRVkiLCJmaXJzdE5hbWUiLCJtaWRkbGVOYW1lIiwibGFzdE5hbWUiLCJtb3RoZXJzTWFpZGVuTmFtZSIsImVtYWlsIiwicGhvbmUiLCJkYXRlT2ZCaXJ0aCIsInNzbiIsImlkTnVtYmVyIiwiY291bnRyeSIsImFkZHJlc3MiLCJjaXR5Iiwic3RhdGUiLCJ6aXBDb2RlIiwiYWNjb3VudFR5cGVzIiwiZW1wbG95bWVudFN0YXR1cyIsImFubnVhbEluY29tZSIsInBhc3N3b3JkIiwic2VuZEVucm9sbG1lbnRFbWFpbCIsImJvZHkiLCJkb2IiLCJzc25PcklkIiwic2VsZWN0ZWRBY2NvdW50VHlwZXMiLCJkYXRhIiwiZXhpc3RpbmdVc2VyIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiQUNDT1VOVF9UWVBFX01BUFBJTkciLCJtYXBwZWRBY2NvdW50VHlwZXMiLCJtYXAiLCJpZCIsImZpbHRlciIsIkJvb2xlYW4iLCJhcHBsaWNhdGlvbkRhdGEiLCJmaXJzdF9uYW1lIiwibWlkZGxlX25hbWUiLCJsYXN0X25hbWUiLCJtb3RoZXJzX21haWRlbl9uYW1lIiwidG9Mb3dlckNhc2UiLCJkYXRlX29mX2JpcnRoIiwiaWRfbnVtYmVyIiwiemlwX2NvZGUiLCJhY2NvdW50X3R5cGVzIiwiZW1wbG95bWVudF9zdGF0dXMiLCJhbm51YWxfaW5jb21lIiwiYXBwbGljYXRpb25fc3RhdHVzIiwiY3JlYXRlZF9ieV9hZG1pbiIsInN1Ym1pdHRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInByb2Nlc3NlZF9hdCIsImNvbnNvbGUiLCJsb2ciLCJhcHBsaWNhdGlvbiIsImFwcGxpY2F0aW9uRXJyb3IiLCJpbnNlcnQiLCJhY2NvdW50c0RhdGEiLCJhY2NvdW50VHlwZSIsImFjY291bnRUeXBlQ29uZmlnIiwibmFtZSIsImluaXRpYWxCYWxhbmNlIiwiY29uZmlnIiwiYWNjb3VudE51bWJlciIsIkFycmF5IiwibGVuZ3RoIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiam9pbiIsImFwcGxpY2F0aW9uX2lkIiwiYWNjb3VudF9udW1iZXIiLCJhY2NvdW50X3R5cGUiLCJhY2NvdW50X25hbWUiLCJiYWxhbmNlIiwicm91dGluZ19udW1iZXIiLCJjcmVhdGVkX2F0IiwiYWNjb3VudHMiLCJhY2NvdW50c0Vycm9yIiwiYXV0aFVzZXIiLCJhdXRoRXJyb3IiLCJhdXRoIiwiYWRtaW4iLCJjcmVhdGVVc2VyIiwiZW1haWxfY29uZmlybSIsInVzZXJfbWV0YWRhdGEiLCJhZG1pbl9jcmVhdGVkIiwicHJvZmlsZUVycm9yIiwidXNlciIsImxpbmtFcnJvciIsInVwZGF0ZSIsInVzZXJfaWQiLCJlbWFpbFNlbnQiLCJlbWFpbFJlc3BvbnNlIiwiZmV0Y2giLCJvcmlnaW4iLCJKU09OIiwic3RyaW5naWZ5Iiwic2VuZF9lbnJvbGxtZW50Iiwib2siLCJlbWFpbEVycm9yIiwibWVzc2FnZSIsInVzZXJJZCIsImF1dGhfaWQiLCJhY2MiLCJlbWFpbF9zZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/admin/create-user.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fcreate-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fcreate-user.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();