"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/create-auth-user";
exports.ids = ["pages/api/create-auth-user"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcreate-auth-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcreate-auth-user.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcreate-auth-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcreate-auth-user.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_create_auth_user_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/create-auth-user.js */ \"(api)/./pages/api/create-auth-user.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_create_auth_user_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_create_auth_user_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/create-auth-user\",\n        pathname: \"/api/create-auth-user\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_create_auth_user_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNyZWF0ZS1hdXRoLXVzZXImcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmNyZWF0ZS1hdXRoLXVzZXIuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNEQ7QUFDNUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDJEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywyREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYWtsaW5lLWJhbmsvPzI1ZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9jcmVhdGUtYXV0aC11c2VyLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY3JlYXRlLWF1dGgtdXNlclwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NyZWF0ZS1hdXRoLXVzZXJcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcreate-auth-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcreate-auth-user.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabaseClient.js":
/*!*******************************!*\
  !*** ./lib/supabaseClient.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n// lib/supabaseClient.js\n\n// Supabase configuration - Use your environment variables\nconst supabaseUrl = \"https://nrjdmgltshosdqccaymr.supabase.co\" || 0 || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yamRtZ2x0c2hvc2RxY2NheW1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwMzYyMjAsImV4cCI6MjA3MTYxMjIyMH0.b9H553W2PCsSNvr8HyyINl4nTSrldHN_QMQ3TVwt6qk\" || 0 || 0;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_SERVICE_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yamRtZ2x0c2hvc2RxY2NheW1yIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjAzNjIyMCwiZXhwIjoyMDcxNjEyMjIwfQ.cXKwVlQNqtAE13jrgmr2RBuIwtEbxqGsVF9SiRwqV_E\";\n// Validate required environment variables\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing Supabase configuration\");\n}\n// Public client for front-end (browser)\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Server-side client with elevated privileges\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2VDbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLHdCQUF3QjtBQUM2QjtBQUVyRCwwREFBMEQ7QUFDMUQsTUFBTUMsY0FBY0MsMENBQW9DLElBQUlBLENBQXdCLElBQUk7QUFDeEYsTUFBTUksa0JBQWtCSixrTkFBeUMsSUFBSUEsQ0FBNkIsSUFBSTtBQUN0RyxNQUFNTyxxQkFBcUJQLFFBQVFDLEdBQUcsQ0FBQ08seUJBQXlCLElBQUlSLFFBQVFDLEdBQUcsQ0FBQ1Esb0JBQW9CLElBQUk7QUFFeEcsMENBQTBDO0FBQzFDLElBQUksQ0FBQ1YsZUFBZSxDQUFDSyxpQkFBaUI7SUFDcENNLFFBQVFDLEtBQUssQ0FBQztBQUNoQjtBQUVBLHdDQUF3QztBQUNqQyxNQUFNQyxXQUFXZCxtRUFBWUEsQ0FBQ0MsYUFBYUssaUJBQWlCO0FBRW5FLDhDQUE4QztBQUN2QyxNQUFNUyxnQkFBZ0JmLG1FQUFZQSxDQUFDQyxhQUFhUSxvQkFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vYWtsaW5lLWJhbmsvLi9saWIvc3VwYWJhc2VDbGllbnQuanM/NWYwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIGxpYi9zdXBhYmFzZUNsaWVudC5qc1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuLy8gU3VwYWJhc2UgY29uZmlndXJhdGlvbiAtIFVzZSB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMIHx8ICdodHRwczovL25yamRtZ2x0c2hvc2RxY2NheW1yLnN1cGFiYXNlLmNvJztcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIHx8IHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZIHx8ICdleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKcGMzTWlPaUp6ZFhCaFltRnpaU0lzSW5KbFppSTZJbTV5YW1SdFoyeDBjMmh2YzJSeFkyTmhlVzF5SWl3aWNtOXNaU0k2SW1GdWIyNGlMQ0pwWVhRaU9qRTNOVFl3TXpZeU1qQXNJbVY0Y0NJNk1qQTNNVFl4TWpJeU1IMC5iOUg1NTNXMlBDc1NOdnI4SHl5SU5sNG5UU3JsZEhOX1FNUTNUVnd0NnFrJztcbmNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgfHwgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9LRVkgfHwgJ2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwYzNNaU9pSnpkWEJoWW1GelpTSXNJbkpsWmlJNkltNXlhbVJ0WjJ4MGMyaHZjMlJ4WTJOaGVXMXlJaXdpY205c1pTSTZJbk5sY25acFkyVmZjbTlzWlNJc0ltbGhkQ0k2TVRjMU5qQXpOakl5TUN3aVpYaHdJam95TURjeE5qRXlNakl3ZlEuY1hLd1ZsUU5xdEFFMTNqcmdtcjJSQnVJd3RFYnhxR3NWRjlTaVJ3cVZfRSc7XG5cbi8vIFZhbGlkYXRlIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlc1xuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgY29uZmlndXJhdGlvbicpO1xufVxuXG4vLyBQdWJsaWMgY2xpZW50IGZvciBmcm9udC1lbmQgKGJyb3dzZXIpXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7XG5cbi8vIFNlcnZlci1zaWRlIGNsaWVudCB3aXRoIGVsZXZhdGVkIHByaXZpbGVnZXNcbmV4cG9ydCBjb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXkpO1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiU1VQQUJBU0VfU0VSVklDRV9LRVkiLCJjb25zb2xlIiwiZXJyb3IiLCJzdXBhYmFzZSIsInN1cGFiYXNlQWRtaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/supabaseClient.js\n");

/***/ }),

/***/ "(api)/./pages/api/create-auth-user.js":
/*!***************************************!*\
  !*** ./pages/api/create-auth-user.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/supabaseClient */ \"(api)/./lib/supabaseClient.js\");\n// pages/api/create-auth-user.js\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const { token } = req.body; // Expecting a token, not temp_user_id\n    if (!token) {\n        return res.status(400).json({\n            error: \"Missing token\"\n        });\n    }\n    try {\n        // 1️⃣ Get enrollment data using the token\n        const { data: enrollmentData, error: enrollmentError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"enrollments\").select(\"*\").eq(\"token\", token).eq(\"is_used\", false) // Ensure the token hasn't been used\n        .single();\n        if (enrollmentError || !enrollmentData) {\n            return res.status(404).json({\n                error: \"Invalid or used enrollment token\"\n            });\n        }\n        // Fetch application data using the email from enrollment\n        const { data: applicationData, error: applicationError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"applications\").select(\"*\").eq(\"email\", enrollmentData.email).single();\n        if (applicationError || !applicationData) {\n            return res.status(404).json({\n                error: \"Application data not found for this email\"\n            });\n        }\n        // 4️⃣ Check if auth user already exists\n        const { data: existingAuthUsers, error: listError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.admin.listUsers();\n        const existingAuthUser = existingAuthUsers?.users?.find((user)=>user.email === applicationData.email);\n        if (existingAuthUser) {\n            // Mark token as used\n            await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"enrollments\").update({\n                is_used: true\n            }).eq(\"token\", token);\n            return res.status(200).json({\n                message: \"Auth user already exists\",\n                user: {\n                    id: applicationData.id,\n                    email: applicationData.email,\n                    name: `${applicationData.first_name} ${applicationData.last_name}`,\n                    auth_created: true,\n                    supabase_auth_id: existingAuthUser.id\n                }\n            });\n        }\n        // 5️⃣ Create Supabase Auth user with proper user metadata\n        const userMetadata = {\n            first_name: applicationData.first_name,\n            last_name: applicationData.last_name,\n            country: applicationData.country,\n            application_id: applicationData.id\n        };\n        // Add the appropriate ID field based on country\n        if (applicationData.country === \"US\") {\n            userMetadata.ssn = applicationData.ssn;\n        } else {\n            userMetadata.id_number = applicationData.id_number;\n        }\n        const { data: newAuthData, error: authError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.admin.createUser({\n            email: applicationData.email,\n            password: \"temp_password_\" + Date.now(),\n            email_confirm: true,\n            user_metadata: userMetadata\n        });\n        if (authError) {\n            console.error(\"Auth user creation error:\", authError);\n            // Handle case where user already exists in auth but wasn't caught by listUsers\n            if (authError.message?.includes(\"already registered\") || authError.message?.includes(\"already exists\") || authError.message?.includes(\"User already registered\")) {\n                console.log(\"User already exists in auth, marking token as used and returning success\");\n                await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"enrollments\").update({\n                    is_used: true\n                }).eq(\"token\", token);\n                return res.status(200).json({\n                    message: \"Auth user already exists (not found in initial search)\",\n                    user: {\n                        id: applicationData.id,\n                        email: applicationData.email,\n                        name: `${applicationData.first_name} ${applicationData.last_name}`,\n                        country: applicationData.country,\n                        auth_created: true\n                    }\n                });\n            }\n            return res.status(400).json({\n                error: `Failed to create auth user: ${authError.message}`\n            });\n        }\n        console.log(\"Auth user created successfully:\", newAuthData.user.id);\n        // 6️⃣ Mark enrollment token as used\n        const { error: updateError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"enrollments\").update({\n            is_used: true\n        }).eq(\"token\", token);\n        if (updateError) {\n            console.error(\"Token update error:\", updateError);\n        // Don't fail the process for this\n        }\n        res.status(200).json({\n            message: \"Auth user created successfully\",\n            user: {\n                id: applicationData.id,\n                email: applicationData.email,\n                name: `${applicationData.first_name} ${applicationData.last_name}`,\n                country: applicationData.country,\n                auth_created: true,\n                supabase_auth_id: newAuthData.user.id\n            }\n        });\n    } catch (error) {\n        console.error(\"Create auth user error:\", error);\n        res.status(500).json({\n            error: \"Internal server error during auth user creation\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRTtRQUVsRSxvQ0FBb0M7UUFDcEMsTUFBTSxFQUFFekIsT0FBTytDLFdBQVcsRUFBRSxHQUFHLE1BQU10RCw4REFBYUEsQ0FDL0NhLElBQUksQ0FBQyxlQUNMZ0IsTUFBTSxDQUFDO1lBQUVDLFNBQVM7UUFBSyxHQUN2QmYsRUFBRSxDQUFDLFNBQVNQO1FBRWYsSUFBSThDLGFBQWE7WUFDZkgsUUFBUTVDLEtBQUssQ0FBQyx1QkFBdUIrQztRQUNyQyxrQ0FBa0M7UUFDcEM7UUFFQW5ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkJ5QixTQUFTO1lBQ1RILE1BQU07Z0JBQ0pJLElBQUlmLGdCQUFnQmUsRUFBRTtnQkFDdEJiLE9BQU9GLGdCQUFnQkUsS0FBSztnQkFDNUJjLE1BQU0sQ0FBQyxFQUFFaEIsZ0JBQWdCaUIsVUFBVSxDQUFDLENBQUMsRUFBRWpCLGdCQUFnQmtCLFNBQVMsQ0FBQyxDQUFDO2dCQUNsRUksU0FBU3RCLGdCQUFnQnNCLE9BQU87Z0JBQ2hDSCxjQUFjO2dCQUNkQyxrQkFBa0JNLFlBQVlmLElBQUksQ0FBQ0ksRUFBRTtZQUN2QztRQUNGO0lBRUYsRUFBRSxPQUFPekIsT0FBTztRQUNkNEMsUUFBUTVDLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBa0Q7SUFDbEY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL29ha2xpbmUtYmFuay8uL3BhZ2VzL2FwaS9jcmVhdGUtYXV0aC11c2VyLmpzP2I3MTQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL2NyZWF0ZS1hdXRoLXVzZXIuanNcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICcuLi8uLi9saWIvc3VwYWJhc2VDbGllbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICBjb25zdCB7IHRva2VuIH0gPSByZXEuYm9keTsgLy8gRXhwZWN0aW5nIGEgdG9rZW4sIG5vdCB0ZW1wX3VzZXJfaWRcblxuICBpZiAoIXRva2VuKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHRva2VuJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gMe+4j+KDoyBHZXQgZW5yb2xsbWVudCBkYXRhIHVzaW5nIHRoZSB0b2tlblxuICAgIGNvbnN0IHsgZGF0YTogZW5yb2xsbWVudERhdGEsIGVycm9yOiBlbnJvbGxtZW50RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdlbnJvbGxtZW50cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgndG9rZW4nLCB0b2tlbilcbiAgICAgIC5lcSgnaXNfdXNlZCcsIGZhbHNlKSAvLyBFbnN1cmUgdGhlIHRva2VuIGhhc24ndCBiZWVuIHVzZWRcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlbnJvbGxtZW50RXJyb3IgfHwgIWVucm9sbG1lbnREYXRhKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgb3IgdXNlZCBlbnJvbGxtZW50IHRva2VuJyB9KTtcbiAgICB9XG5cbiAgICAvLyBGZXRjaCBhcHBsaWNhdGlvbiBkYXRhIHVzaW5nIHRoZSBlbWFpbCBmcm9tIGVucm9sbG1lbnRcbiAgICBjb25zdCB7IGRhdGE6IGFwcGxpY2F0aW9uRGF0YSwgZXJyb3I6IGFwcGxpY2F0aW9uRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdhcHBsaWNhdGlvbnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2VtYWlsJywgZW5yb2xsbWVudERhdGEuZW1haWwpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoYXBwbGljYXRpb25FcnJvciB8fCAhYXBwbGljYXRpb25EYXRhKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0FwcGxpY2F0aW9uIGRhdGEgbm90IGZvdW5kIGZvciB0aGlzIGVtYWlsJyB9KTtcbiAgICB9XG5cbiAgICAvLyA077iP4oOjIENoZWNrIGlmIGF1dGggdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdBdXRoVXNlcnMsIGVycm9yOiBsaXN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW4uYXV0aC5hZG1pbi5saXN0VXNlcnMoKTtcbiAgICBjb25zdCBleGlzdGluZ0F1dGhVc2VyID0gZXhpc3RpbmdBdXRoVXNlcnM/LnVzZXJzPy5maW5kKHVzZXIgPT4gdXNlci5lbWFpbCA9PT0gYXBwbGljYXRpb25EYXRhLmVtYWlsKTtcblxuICAgIGlmIChleGlzdGluZ0F1dGhVc2VyKSB7XG4gICAgICAvLyBNYXJrIHRva2VuIGFzIHVzZWRcbiAgICAgIGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ2Vucm9sbG1lbnRzJylcbiAgICAgICAgLnVwZGF0ZSh7IGlzX3VzZWQ6IHRydWUgfSlcbiAgICAgICAgLmVxKCd0b2tlbicsIHRva2VuKTtcblxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ0F1dGggdXNlciBhbHJlYWR5IGV4aXN0cycsXG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogYXBwbGljYXRpb25EYXRhLmlkLFxuICAgICAgICAgIGVtYWlsOiBhcHBsaWNhdGlvbkRhdGEuZW1haWwsXG4gICAgICAgICAgbmFtZTogYCR7YXBwbGljYXRpb25EYXRhLmZpcnN0X25hbWV9ICR7YXBwbGljYXRpb25EYXRhLmxhc3RfbmFtZX1gLFxuICAgICAgICAgIGF1dGhfY3JlYXRlZDogdHJ1ZSxcbiAgICAgICAgICBzdXBhYmFzZV9hdXRoX2lkOiBleGlzdGluZ0F1dGhVc2VyLmlkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIDXvuI/ig6MgQ3JlYXRlIFN1cGFiYXNlIEF1dGggdXNlciB3aXRoIHByb3BlciB1c2VyIG1ldGFkYXRhXG4gICAgY29uc3QgdXNlck1ldGFkYXRhID0ge1xuICAgICAgZmlyc3RfbmFtZTogYXBwbGljYXRpb25EYXRhLmZpcnN0X25hbWUsXG4gICAgICBsYXN0X25hbWU6IGFwcGxpY2F0aW9uRGF0YS5sYXN0X25hbWUsXG4gICAgICBjb3VudHJ5OiBhcHBsaWNhdGlvbkRhdGEuY291bnRyeSxcbiAgICAgIGFwcGxpY2F0aW9uX2lkOiBhcHBsaWNhdGlvbkRhdGEuaWRcbiAgICB9O1xuXG4gICAgLy8gQWRkIHRoZSBhcHByb3ByaWF0ZSBJRCBmaWVsZCBiYXNlZCBvbiBjb3VudHJ5XG4gICAgaWYgKGFwcGxpY2F0aW9uRGF0YS5jb3VudHJ5ID09PSAnVVMnKSB7XG4gICAgICB1c2VyTWV0YWRhdGEuc3NuID0gYXBwbGljYXRpb25EYXRhLnNzbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdXNlck1ldGFkYXRhLmlkX251bWJlciA9IGFwcGxpY2F0aW9uRGF0YS5pZF9udW1iZXI7XG4gICAgfVxuXG4gICAgY29uc3QgeyBkYXRhOiBuZXdBdXRoRGF0YSwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5hdXRoLmFkbWluLmNyZWF0ZVVzZXIoe1xuICAgICAgZW1haWw6IGFwcGxpY2F0aW9uRGF0YS5lbWFpbCxcbiAgICAgIHBhc3N3b3JkOiAndGVtcF9wYXNzd29yZF8nICsgRGF0ZS5ub3coKSwgLy8gVGVtcG9yYXJ5IHBhc3N3b3JkXG4gICAgICBlbWFpbF9jb25maXJtOiB0cnVlLFxuICAgICAgdXNlcl9tZXRhZGF0YTogdXNlck1ldGFkYXRhXG4gICAgfSk7XG5cbiAgICBpZiAoYXV0aEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBdXRoIHVzZXIgY3JlYXRpb24gZXJyb3I6JywgYXV0aEVycm9yKTtcblxuICAgICAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgdXNlciBhbHJlYWR5IGV4aXN0cyBpbiBhdXRoIGJ1dCB3YXNuJ3QgY2F1Z2h0IGJ5IGxpc3RVc2Vyc1xuICAgICAgaWYgKGF1dGhFcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnYWxyZWFkeSByZWdpc3RlcmVkJykgfHxcbiAgICAgICAgICBhdXRoRXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ2FscmVhZHkgZXhpc3RzJykgfHxcbiAgICAgICAgICBhdXRoRXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ1VzZXIgYWxyZWFkeSByZWdpc3RlcmVkJykpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgYWxyZWFkeSBleGlzdHMgaW4gYXV0aCwgbWFya2luZyB0b2tlbiBhcyB1c2VkIGFuZCByZXR1cm5pbmcgc3VjY2VzcycpO1xuICAgICAgICBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgICAgLmZyb20oJ2Vucm9sbG1lbnRzJylcbiAgICAgICAgICAudXBkYXRlKHsgaXNfdXNlZDogdHJ1ZSB9KVxuICAgICAgICAgIC5lcSgndG9rZW4nLCB0b2tlbik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0F1dGggdXNlciBhbHJlYWR5IGV4aXN0cyAobm90IGZvdW5kIGluIGluaXRpYWwgc2VhcmNoKScsXG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgaWQ6IGFwcGxpY2F0aW9uRGF0YS5pZCxcbiAgICAgICAgICAgIGVtYWlsOiBhcHBsaWNhdGlvbkRhdGEuZW1haWwsXG4gICAgICAgICAgICBuYW1lOiBgJHthcHBsaWNhdGlvbkRhdGEuZmlyc3RfbmFtZX0gJHthcHBsaWNhdGlvbkRhdGEubGFzdF9uYW1lfWAsXG4gICAgICAgICAgICBjb3VudHJ5OiBhcHBsaWNhdGlvbkRhdGEuY291bnRyeSxcbiAgICAgICAgICAgIGF1dGhfY3JlYXRlZDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBgRmFpbGVkIHRvIGNyZWF0ZSBhdXRoIHVzZXI6ICR7YXV0aEVycm9yLm1lc3NhZ2V9YCB9KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnQXV0aCB1c2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIG5ld0F1dGhEYXRhLnVzZXIuaWQpO1xuXG4gICAgLy8gNu+4j+KDoyBNYXJrIGVucm9sbG1lbnQgdG9rZW4gYXMgdXNlZFxuICAgIGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnZW5yb2xsbWVudHMnKVxuICAgICAgLnVwZGF0ZSh7IGlzX3VzZWQ6IHRydWUgfSlcbiAgICAgIC5lcSgndG9rZW4nLCB0b2tlbik7XG5cbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHVwZGF0ZSBlcnJvcjonLCB1cGRhdGVFcnJvcik7XG4gICAgICAvLyBEb24ndCBmYWlsIHRoZSBwcm9jZXNzIGZvciB0aGlzXG4gICAgfVxuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ0F1dGggdXNlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiBhcHBsaWNhdGlvbkRhdGEuaWQsXG4gICAgICAgIGVtYWlsOiBhcHBsaWNhdGlvbkRhdGEuZW1haWwsXG4gICAgICAgIG5hbWU6IGAke2FwcGxpY2F0aW9uRGF0YS5maXJzdF9uYW1lfSAke2FwcGxpY2F0aW9uRGF0YS5sYXN0X25hbWV9YCxcbiAgICAgICAgY291bnRyeTogYXBwbGljYXRpb25EYXRhLmNvdW50cnksXG4gICAgICAgIGF1dGhfY3JlYXRlZDogdHJ1ZSxcbiAgICAgICAgc3VwYWJhc2VfYXV0aF9pZDogbmV3QXV0aERhdGEudXNlci5pZFxuICAgICAgfVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ3JlYXRlIGF1dGggdXNlciBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvciBkdXJpbmcgYXV0aCB1c2VyIGNyZWF0aW9uJyB9KTtcbiAgfVxufSJdLCJuYW1lcyI6WyJzdXBhYmFzZUFkbWluIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInRva2VuIiwiYm9keSIsImRhdGEiLCJlbnJvbGxtZW50RGF0YSIsImVucm9sbG1lbnRFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImFwcGxpY2F0aW9uRGF0YSIsImFwcGxpY2F0aW9uRXJyb3IiLCJlbWFpbCIsImV4aXN0aW5nQXV0aFVzZXJzIiwibGlzdEVycm9yIiwiYXV0aCIsImFkbWluIiwibGlzdFVzZXJzIiwiZXhpc3RpbmdBdXRoVXNlciIsInVzZXJzIiwiZmluZCIsInVzZXIiLCJ1cGRhdGUiLCJpc191c2VkIiwibWVzc2FnZSIsImlkIiwibmFtZSIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJhdXRoX2NyZWF0ZWQiLCJzdXBhYmFzZV9hdXRoX2lkIiwidXNlck1ldGFkYXRhIiwiY291bnRyeSIsImFwcGxpY2F0aW9uX2lkIiwic3NuIiwiaWRfbnVtYmVyIiwibmV3QXV0aERhdGEiLCJhdXRoRXJyb3IiLCJjcmVhdGVVc2VyIiwicGFzc3dvcmQiLCJEYXRlIiwibm93IiwiZW1haWxfY29uZmlybSIsInVzZXJfbWV0YWRhdGEiLCJjb25zb2xlIiwiaW5jbHVkZXMiLCJsb2ciLCJ1cGRhdGVFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/create-auth-user.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcreate-auth-user&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcreate-auth-user.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();